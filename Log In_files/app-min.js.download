var defaultConfig={domain:"sso.dev.accounts.dowjones.com",clientID:"KXsHbKPkIYfKhVmamO52fKl1NZjb1KCf",callbackURL:"https://dev.accounts.dowjones.com/callback",popup:!1,callbackOnLocationHash:!1,env:"dev"};!function(){window.DowJones=window.DowJones||{},DowJones.Analytics=function(e){var o=e.env||"dev",t="//tags.tiqcdn.com/utag/wsjdn/oneidentity/"+o+"/utag.js",i=e.loc.pathname,n=e.loc.search;this.previousModule="",this.analyticsData={brand:e.profile,module:e.module,pageUrl:e.loc.href,urlPath:i,urlQuery:n,landingPage:"0",previousModule:""},"signin"===this.analyticsData.module&&(this.cookiesEnabled()||(this.analyticsData.module+="-nocookies")),window.utag_data={};for(var s in this.analyticsData)this.analyticsData.hasOwnProperty(s)&&(window.utag_data[s]=this.analyticsData[s]);window.utag_data.landingPage="1",this.previousModule=e.module;var r=document.createElement("script");r.setAttribute("async","true"),r.setAttribute("type","text/javascript"),r.setAttribute("src",t),document.getElementsByTagName("body")[0].appendChild(r)},DowJones.Analytics.prototype={trackEvent:function(e,o){var t=o||"link",i={};for(var n in this.analyticsData)i[n]=e[n]?e[n]:this.analyticsData[n];i.previousModule=this.previousModule,this.previousModule=e.module,"signin"!==i.module||this.cookiesEnabled()||(i.module+="-nocookies"),window.utag[t](i)},cookiesEnabled:function(){if(navigator.cookieEnabled)return navigator.cookieEnabled;document.cookie="test_cookie=some-value";var e=document.cookie.indexOf("test_cookie")>-1;return e&&(document.cookie="test_cookie=; expires=Thu, 01 Jan 1970 00:00:00 GMT"),e}}}(),function(){window.DowJones=window.DowJones||{},DowJones.OneIdentity=function(){var e="",o={},t=null,i=!0,n={},s=null,r={authZeroState:null,run:function(e){$(window).bind("pageshow",function(e){e.originalEvent.persisted&&window.location.reload()});var o=this.parseUrlQuery(window.location.search.substr(1));s=e||defaultConfig,s.maxKli=maxKli,this.initLocale(s),this.translate();var i=this.getBrand();FastClick.attach(document.body),DowJones.FancyInput.init("#main"),r.configureRoutes(o),r.modifyLayout(window.location),r.showGlobalMessaging(),this.applyBrand(i);var n={profile:this.profileFromBrand(i,o),module:this.getCurrentRoute(window.location),loc:window.location,env:this.getPageEnvironment(window.location)};t=new DowJones.Analytics(n),$("a.navigate-back").on("click",this.navigateBack),$("#main").addClass("loaded"),$(".page").on("animationend",r.onShowPageAnimationComplete)},configureRoutes:function(e){o.forgotPasswordComponent=new DowJones.ForgotPasswordForm,o.forgotPasswordConfirmComponent=new DowJones.ForgotPasswordConfirmation,o.loginComponent=new DowJones.LoginForm(s),o.smsPhoneComponent=new DowJones.SMSPhoneForm,o.smsCodeComponent=new DowJones.SMSCodeForm,o.emailLinkComponent=new DowJones.EmailLinkForm,o.emailLinkConfirmComponent=new DowJones.EmailLinkConfirmation,o.registerNewUser=new DowJones.UserRegistrationForm,o.registerConfirmation=new DowJones.UserRegistrationConfirmation,o.verifyRegistration=new DowJones.VerifyRegistration,o.emailVerification=new DowJones.EmailVerification,o.resetPassword=new DowJones.PasswordResetForm,o.passwordResetConfirm=new DowJones.PasswordResetConfirm,o.tempPasswordUpdate=new DowJones.TempPasswordUpdate,$("input").focus(function(){$(this).parent("div").addClass("focus")}).blur(function(){$(this).parent("div").removeClass("focus")});var t=this.uiLocales&&this.uiLocales.opts?this.uiLocales.opts:0,i=this.uiLocales&&this.uiLocales.lo?parseInt(this.uiLocales.lo,10):0,n=parseInt(t,10)||0;page("/forgot",function(e){r.showPageById("forgot-password"),o.forgotPasswordComponent.run(),e.title="Forgot Password"}),page("/forgot-confirm",function(e){r.showPageById("forgot-password-confirmation")}),page("/reset-password",function(e){r.showPageById("reset-password"),o.resetPassword.run()}),page("/password-reset-confirmation",function(e){r.showPageById("password-reset-confirm")}),page("/signin",function(e){r.showPageById("basic-login"),o.loginComponent.run()}),4&n&&(page("/sms-phone",function(e){r.showPageById("sms-login-phone"),o.smsPhoneComponent.run()}),page("/sms-code/:phoneNumber",function(e){r.showPageById("sms-login-code"),o.smsCodeComponent.run(e.params.phoneNumber)})),8&n&&(page("/email-link",function(e){r.showPageById("email-link-login"),o.emailLinkComponent.run()}),page("/email-link-confirmation",function(e){r.showPageById("email-link-confirmation")})),2&i||(page("/user-registration",function(e){r.showPageById("user-registration"),o.registerNewUser.run()}),page("/registration-confirm",function(e){r.showPageById("registration-confirm"),o.registerConfirmation.run()}),page("/verify-registration",function(e){r.showPageById("verify-registration"),o.verifyRegistration.run()}),page("/email-verification",function(e){r.showPageById("email-verification"),o.emailVerification.run()})),page("/temp-password-update",function(e){r.showPageById("temp-password-update")}),page("/temp-password-expired",function(e){r.showPageById("temp-password-expired")}),page("*",function(e){r.showPageById("basic-login"),o.loginComponent.run()});var a="/signin";void 0!=e&&void 0!=e.p&&""!=e.p&&e.p.trim().length>0&&(window.history.pushState("object or string","Title",window.location.pathname+(window.location.search&&window.location.search.length>1?"?"+this.removeQueryParameter(window.location.search,"p"):"")),a="/"+e.p),page.start({hashbang:!0,dispatch:!1,click:!1,decodeURLComponents:!1}),window.location.hash&&"#_=_"!==window.location.hash&&(a="/"+window.location.hash.replace(/[#!\/]/g,""));var c=window.history.state;window.history.replaceState(c,"Log in","#!"+a),page.show(a,{initialPage:!0},!0,!1)},showGlobalMessaging:function(){var e=this.getQueryVariable("message");e&&$("#global-info").html(e).show()},getEdition:function(){var e=this.getBrand();switch(e.name){case"mw":return"MARKETWATCH-EN_US";case"barrons":return"BARRONS-EN_US";case"wsjpro":return"WSJPRO-EN_US";case"dowjones":return"DOWJONES-EN_US";case"wsj":return"WSJ-EN_US";case"efn":return"EFN-EN_US";case"pen":return"PEN-EN_US";case"jwsj":return"WSJ-JA_JP";case"cwsj":return"zhtw"===this.uiLocales.language?"WSJ-ZH_TW":"WSJ-ZH_CN";case"ctxwsj":return"WSJ-EN_US";default:return e.templateCode||"WSJ-EN_US"}},getBrand:function(){var e;e=this.uiLocales?this.uiLocales.brand:"wsj";var o=DowJones.Config[e],t=o&&o.baseBrand?DowJones.Config[o.baseBrand]:null;if(Object.hasOwnProperty("assign"))t&&(o=Object.assign(t,o));else for(var i in t)o[i]||(o[i]=t[i]);return o},initLocale:function(e){var o=e?e.extraParams:void 0,t=o?o.ui_locales:void 0,i=t||this.getQueryVariable("ui_locales");if(!i&&this.getQueryVariable("device")&&"mktw-mobile-app"===this.getQueryVariable("device")&&(i="en-us-x-mw-0"),!i)return void(this.uiLocales=void 0);var n=0,s=1,r=3,a=4,c=5,l=i.split("-");this.uiLocales={language:l[n]||"en",countryCode:l[s]||"us",brand:l[r]||"wsj",opts:l[a]||"0",lo:l[c]||"0"}},initializeAuthZero:function(){var e=$.extend(!0,{},s);return e.auth0Domain&&(e.domain=e.auth0Domain),e.extraParams&&e.extraParams.state&&!$.isEmptyObject(e.extraParams.state)?this.authZeroState=e.extraParams.state:this.authZeroState="brand%3Dmw",new Auth0(e)},getOptions:function(){var e;return e=this.uiLocales?this.uiLocales.opts:0,parseInt(e)},getLoginOptions:function(e){var o=e.location.search.substring(1),t=this.getOptions(o);return{google:(1&t)>0,facebook:(2&t)>0,sms:(4&t)>0,passwordField:(8&t)>0,subscribe:(16&t)>0,oneTimeLink:(32&t)>0,activatePrintSubscription:(64&t)>0}},applyBrand:function(e){var o=this.uiLocales?this.uiLocales.language:"en",t=DowJones.languages?DowJones.languages[o][e.newMemeberLinkText]:"register here.";$("#customerCenter").attr("href",e.customerCenter),$("#logo-link").attr("href",e.homePage),"efn"!=e.name&&"pen"!=e.name||$("#logo-title").text(e.fullName),e.newMemeberLinkText&&$(".not-a-member-link").text(this.capitalizeFirstLetter(t)),"mw"===e.name&&$(".dt-job-title-for-reg").hide(),e.newMemberLink&&$(".not-a-member-link").attr("href",e.newMemberLink),e.forgotLink&&$(".forgot-link").attr("href",e.forgotLink),e.cookiePolicyLink&&$("#cookiePolicyLink").attr("href",e.cookiePolicyLink),e.privacyPolicyLink&&$("#privacyPolicyLink").attr("href",e.privacyPolicyLink),$("body").addClass(e.name)},capitalizeFirstLetter:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},parseUrlQuery:function(e){var o={};return"[object String]"!==Object.prototype.toString.call(e)?o:(e.replace(/([\w\d]+)=([^&]+)/g,function(e,t,i){o[t.toLowerCase()]=decodeURIComponent(i)}),n=o,o)},removeQueryParameter:function(e,o){if("[object String]"!==Object.prototype.toString.call(e)||void 0===o||""===o)return e;var t=[];return e.replace(/([\w\d]+)=([^&]+)/g,function(e,i,n){i.toLowerCase()!==o.toLowerCase()&&t.push(e)}),t.join("&")},getQueryVariable:function(e,o){if(!o&&n[e])return n[e];for(var t=o||window.location.search.substring(1),i=t.split("&"),s=0;s<i.length;s++){var r=i[s].split("=");if(decodeURIComponent(r[0].toLowerCase())==e.toLowerCase())return decodeURIComponent(r[1])}return""},showPageById:function(o,t){var i=e?r.getPageIndex(e):-1,n=r.getPageIndex(o),s=$(".page-"+i),a=$(".page-"+n),c=$(".cardwrapper"),l=$(".cardtransition"),d=s.outerHeight();a.show();var h=a.outerHeight();a.hide(),l.height(d),s.fadeOut(200,function(){a.fadeIn(200)}),l.animate({height:h},400,function(){l.height("")}),$(window).width()<=640&&$("html,body").animate({scrollTop:90},200),$(".page").hide(),i===-1&&$(".page-"+n).show(),e=o,setTimeout(function(){r.trackPageView(r.getCurrentRoute(window.location)),s=null,a=null,c=null},500)},onShowPageAnimationComplete:function(){var e=$(this);(e.hasClass("to-right")||e.hasClass("to-left"))&&e.hide()},getPageIndex:function(e){var o=$("#"+e).attr("class");if(o)for(var t=o.split(" "),i=0;i<t.length;i++)if(0===t[i].indexOf("page-"))return parseInt(t[i].substr(5,t[i].length));return-1},onPageUnload:function(){var e;for(e in o)o[e].destroy&&"function"==typeof o[e].destroy&&o[e].destroy();$("a.navigate-back").off("click"),o=null},profileFromBrand:function(e,o){var t=e.name;return t},trackEvent:function(e,o){t&&t.trackEvent&&!i?(i=!1,t.trackEvent(e,o)):i=!1},trackPageView:function(e){this.trackEvent({module:e},"view")},getCurrentRoute:function(e){return e&&e.hash&&"[object String]"===Object.prototype.toString.call(e.hash)?e.hash.replace(/^[^\w]+/,""):""},modifyLayout:function(e,o){var t=[this.hideFooter,this.hideRegistration,this.hideKeepLoggedIn,this.setRegistrationPopupEnabled],i=this.uiLocales?parseInt(this.uiLocales.lo||0,10):0;this.runFunctionOnBitmap(i,t)},setRegistrationPopupEnabled:function(){o.loginComponent.$registrationPopupEnabled=!0},runFunctionOnBitmap:function(e,o){if(e&&"[object Number]"===Object.prototype.toString.call(e)){var t=e;if(t&&t<65)for(var i=0;t;)1&t&&"function"==typeof o[i]&&o[i](),i++,t>>=1}},hideFooter:function(){$("#footer").remove()},hideRegistration:function(){$("#user-registration").remove(),$("#not-a-member").remove()},hideKeepLoggedIn:function(){$("#rememberme").off("click"),$("#label-rememberme").remove(),$("#rememberme-label").remove()},getPageEnvironment:function(e){if("sso.accounts.dowjones.com"===e.hostname||"fnauth.accounts.dowjones.com"===e.hostname)return"prod";if("localhost"===e.hostname)return"dev";var o=e.hostname.match(/(\w+\.)?(\w+)\.accounts\.dowjones\.com/);if(!o)throw new Error("invalid URL pattern detected");switch(o[2]){case"int":return"qa";case"dev":return"dev";case"stg":return"qa";default:throw new Error("invalid environment detected")}},getLanguage:function(){if(!this.uiLocales)return"en";supportedLanguages=["en","ja","zhcn","zhtw"];var e=this.uiLocales.language.toLowerCase(),o=this.uiLocales.countryCode.toLowerCase();if("zh"===e)switch(o){case"cn":this.uiLocales.language="zhcn",e="zhcn";break;case"tw":this.uiLocales.language="zhtw",e="zhtw";break;default:this.uiLocales.language="zhcn",e="zhcn"}return supportedLanguages.indexOf(e)>-1?e:"en"},translate:function(){var e=this.getLanguage(),o=$("*[data-token]"),t=$("*[token-title]"),i=DowJones.languages[e];o.each(function(){if(0===$(this)[0].childNodes.length)return void $(this).text(i[$(this).attr("data-token")]);for(var e=0;e<$(this)[0].childNodes.length;e++)if("#text"===$(this)[0].childNodes[e].nodeName){$(this)[0].childNodes[e].nodeValue=i[$(this).attr("data-token")];break}}),t.each(function(){var e=$(this);e.attr("title",i[e.attr("token-title")])})},getTranslationFromToken:function(e,o){o=o?o:"";var t=this.getLanguage();return DowJones.languages&&e in DowJones.languages[t]?DowJones.languages[t][e]:o},navigateBack:function(){window.history.go(-1)},goToLogin:function(){var e=this.getQueryVariable("state");e?this.navigateBack():window.location.href=DowJones.OneIdentity.getBrand().loginRedirect}};return window.addEventListener("unload",r.onPageUnload),r}()}(),function(){window.DowJones=window.DowJones||{},DowJones.Config={resource_owner_client_id:"WkfjdLD1I5rfFneqtTs5h9QyTQqY4qa1",grecaptchaSitekey:"6Ld8b0MUAAAAAMCzN275tIbcYhGlS0DLOAOAjEZ6",recaptchaUrl:"https://www.google.com/recaptcha/api.js?onload=onloadCallback&render=explicit",wsj:{name:"wsj",fullName:"The Wall Street Journal",displayName:"WSJ",customerCenter:"https://customercenter.wsj.com",homePage:"http://www.wsj.com",newMemberLink:"http://customercenter.wsj.com/register",newSubscriberLink:"http://subscribe.wsj.com/login",subagreement:"http://www.wsj.com/policy/subscriber-agreement",loginRedirect:"https://accounts.wsj.com/login?target=http://www.wsj.com",registrationRedirect:"https://accounts.wsj.com/login?target=https://www.wsj.com",templateCode:"WSJ-EN_US",activateSubscriptionLink:"https://customercenter.wsj.com/locate"},cventwsj:{baseBrand:"wsj",name:"cventwsj",fullName:"The Wall Street Journal",newMemberLink:"https://customercenter.wsj.com/register?ui_locales=en-us-x-cventwsj",newSubscriberLink:"https://customercenter.wsj.com/register?ui_locales=en-us-x-cventwsj"},mw:{name:"mw",fullName:"MarketWatch",displayName:"MarketWatch",customerCenter:"https://www.marketwatch.com/help",homePage:"https://www.marketwatch.com",newMemberLink:"https://customercenter.marketwatch.com/register?ui_locales=en-us-x-mw-3-8",newMemeberLinkText:"registerHere",subagreement:"https://www.marketwatch.com/support/disclaimer.asp",loginRedirect:"https://accounts.marketwatch.com/login?target=https://www.marketwatch.com",registrationRedirect:"https://accounts.marketwatch.com/login?target=https://www.marketwatch.com/user/registration/welcome",templateCode:"MARKETWATCH-EN_US",newSubscriberLink:"https://subscribe.wsj.com/login"},barrons:{name:"barrons",fullName:"Barron's",displayName:"Barron's",customerCenter:"https://customercenter.barrons.com",homePage:"http://www.barrons.com",newMemberLink:"http://barrons.com/barloginpromo",subagreement:"http://www.barrons.com/public/page/subscriber-agreement.html",loginRedirect:"https://accounts.barrons.com/login?target=http://www.barrons.com",registrationRedirect:"https://accounts.barrons.com/login?target=http://www.barrons.com",templateCode:"BARRONS-EN_US",newSubscriberLink:"http://barrons.com/barloginpromo",activateSubscriptionLink:"https://buy.barrons.com/shopandbuy/order/subscribe.jsp?trackCode=aap6y434"},dowjones:{name:"dowjones",fullName:"Dow Jones",displayName:"Dow Jones",customerCenter:"https://customercenter.dowjones.com",homePage:"http://www.dowjones.com",subagreement:"http://www.dowjones.com/legal-notices/",loginRedirect:"https://accounts.dowjones.com/login?target=http://www.dowjones.com/",templateCode:"DOWJONES-EN_US",newSubscriberLink:"http://subscribe.wsj.com/login"},wsjpro:{name:"wsjpro",fullName:"WSJ Pro",displayName:"WSJPRO",customerCenter:"https://customercenter.wsj.com",homePage:"https://www.wsj.com/pro",subagreement:"https://www.wsj.com/policy/subscriber-agreement",loginRedirect:"https://accounts.wsj.com/login?target=https://www.wsj.com/pro",noProUserRedirect:"https://id.wsj.com/auth/o2/login/pib",templateCode:"WSJPRO-EN_US",newSubscriberLink:"https://www.wsj.com/pro/join"},efn:{name:"efn",fullName:"Financial News",displayName:"Financial News",customerCenter:"mailto: customerservices@fnlondon.com",homePage:"http://www.fnlondon.com",newMemeberLinkText:"registerHere",newMemberLink:"https://subs.fnlondon.com",forgotLink:"https://www.fnlondon.com/profile/password-reset/create",subagreement:"https://www.fnlondon.com",loginRedirect:"https://accounts.dowjones.com/login/?target=https://www.fnlondon.com",templateCode:"EFN-EN_US",newSubscriberLink:"https://subs.fnlondon.com"},pen:{name:"pen",fullName:"Private Equity News",displayName:"Private Equity News",customerCenter:"mailto: customerservices@fnlondon.com",homePage:"https://www.penews.com",newMemeberLinkText:"registerHere",newMemberLink:"https://subs.penews.com/",forgotLink:"https://www.penews.com/profile/password-reset/create",subagreement:"https://www.penews.com/terms-and-conditions",loginRedirect:"https://accounts.dowjones.com/auth/fn/login/?target=https://www.penews.com",templateCode:"PEN-EN_US",newSubscriberLink:"https://subs.penews.com/"},jwsj:{name:"jwsj",fullName:"The Wall Street Journal",displayName:"WSJ",customerCenter:"https://customercenter.wsj.com/view/home.html?language=JA&locale=JP&mod=WSJ_JPFooter",homePage:"http://jp.wsj.com",newMemberLink:"https://buy.wsj.com/jwsjpolitics17/?trackCode=aaqpdfp6",newMemeberLinkText:"registerHere",subagreement:"http://www.wsj.com/policy/subscriber-agreement",loginRedirect:"https://accounts.wsj.com/login?target=http://jp.wsj.com",privacyPolicyLink:"http://jp.wsj.com/policy/jp-privacy-policy",cookiePolicyLink:"http://jp.wsj.com/policy/jp-cookie-policy",templateCode:"WSJ-JA_JP",newSubscriberLink:"https://buy.wsj.com/jwsjpolitics17/?trackCode=aaqpdfp6"},cwsj:{name:"cwsj",fullName:"The Wall Street Journal",displayName:"WSJ",customerCenter:"http://cn.wsj.com/gb/sysasp/contact.asp",homePage:"http://cn.wsj.com/",newMemberLink:"https://subscribe.wsj.com/cnwsjloginpromo",newSubscriberLink:"https://subscribe.wsj.com/cnwsjloginpromo",newMemeberLinkText:"registerHere",subagreement:"http://cn.wsj.com/gb/sysasp/agreement.asp",loginRedirect:"https://accounts.wsj.com/login?target=http://cn.wsj.com",privacyPolicyLink:"http://cn.wsj.com/gb/sysasp/privacypolicy.html",cookiePolicyLink:"http://cn.wsj.com/gb/sysasp/cookiepolicy.html",registrationRedirect:"https://accounts.wsj.com/login?target=https://cn.wsj.com",templateCode:"WSJ-ZH_CN"},ctxwsj:{name:"ctxwsj",fullName:"The Wall Street Journal",displayName:"WSJ Context",customerCenter:"https://customercenter.wsj.com",homePage:"http://context.wsj.com/",newMemberLink:"http://subscribe.wsj.com/login",newSubscriberLink:"http://context.wsj.com/activate",subagreement:"http://www.wsj.com/policy/subscriber-agreement",loginRedirect:"https://accounts.wsj.com/login?target=http://context.wsj.com",registrationRedirect:"https://accounts.wsj.com/login?target=http://context.wsj.com",templateCode:"WSJ-EN_US"}}}(),function(){window.DowJones=window.DowJones||{},DowJones.EmailLinkForm=function(){this.authZeroClient=DowJones.OneIdentity.initializeAuthZero(),this.$container=$("#email-link-login"),this.$emailLinkForm=this.$container.find("form"),this.$email=this.$container.find("#email-for-link"),this.$emailError=this.$container.find(".email-for-link-error"),this.$fpwSubmit=this.$container.find(".email-link-submit"),this.$fpwSubmit.on("click",this.onEmailSubmit.bind(this))},DowJones.EmailLinkForm.prototype={run:function(){setTimeout(function(){this.$email.focus()}.bind(this),100)},onEmailSubmit:function(e){if(e.preventDefault(),this.clearErrors(),this.validateForm()){var o=this.$email.val(),t=this;this.toggleLoadingStatus(!0),this.authZeroClient.requestMagicLink({email:o,authParams:{state:DowJones.OneIdentity.authZeroState,scope:DowJones.OneIdentity.getQueryVariable("scope"),device:DowJones.OneIdentity.getQueryVariable("device")}},function(e){e?(t.$email.addClass("error"),t.$emailError.html(e.error_description),t.$emailError.show()):page.show("/email-link-confirmation"),t.toggleLoadingStatus(!1)})}},validateForm:function(){return 0!==this.$email.val().length||(this.$email.addClass("error"),this.$emailError.show(),!1)},toggleLoadingStatus:function(e){e?(this.$email.prop("disabled",!0),this.$fpwSubmit.prop("disabled",!0),this.$emailLinkForm.addClass("loading")):(this.$email.prop("disabled",!1),this.$fpwSubmit.prop("disabled",!1),this.$emailLinkForm.removeClass("loading"))},clearErrors:function(){this.$container.find(".error").removeClass("error"),this.$emailError.hide()},destroy:function(){this.authZeroClient=null,this.$container=null,this.$emailLinkForm=null,this.$email=null,this.$emailError=null,this.$fpwSubmit.off("click"),this.$fpwSubmit=null}}}(),function(){window.DowJones=window.DowJones||{},DowJones.EmailLinkConfirmation=function(){this.$container=$("#email-link-confirmation")},DowJones.EmailLinkConfirmation.prototype={destroy:function(){this.$container=null}}}(),function(){window.DowJones=window.DowJones||{},DowJones.EmailVerification=function(){this.conf={emailVerification:"/consumeraccess/svc/emailqueue/verificationEmail.json"},this.$container=$("#email-verification"),this.$regError=this.$container.find(".errors"),this.$cardTitle=this.$container.find(".card-title"),this.$sentEmailVerificationContainer=this.$container.find(".sent-verification-email"),this.$resendVerificationEmailContainer=this.$container.find(".resend-verification-email"),this.$rtlSubmit=this.$container.find(".reg-rtl-btn"),this.$regOkBtn=this.$container.find(".reg-ok-btn"),this.$sendEmailBtn=this.$container.find(".reg-rve-btn"),this.$brandLabel=$("#brand-label");DowJones.OneIdentity.getQueryVariable("ut");this.$rtlSubmit.on("click",this.continueLogin.bind(this)),this.$regOkBtn.on("click",this.continueLogin.bind(this)),this.$sendEmailBtn.on("click",this.onSendEmailBtnClick.bind(this))},DowJones.EmailVerification.prototype={run:function(){this.applyBrand()},onRTLSubmitClick:function(e){_returnToSignIn()},onRegOkBtnClick:function(e){_returnToSignIn()},applyBrand:function(){var e=DowJones.OneIdentity.getBrand().displayName;this.$brandLabel.text(this.$brandLabel.text()+" "+e.toUpperCase())},getQueryParam:function(e){e=e.replace(/[*+?^$.\[\]{}()|\\\/]/g,"\\$&");var o=location.search.match(new RegExp("[?&]"+e+"=([^&]+)(&|$)"));return o&&decodeURIComponent(o[1].replace(/\+/g," "))},returnToSignIn:function(){this.clearErrors();var e=DowJones.OneIdentity.getBrand().loginRedirect,o=DowJones.OneIdentity.getQueryVariable("state");if(o&&o.url){var t=e.split("?")[0];e=t+"?target="+encodeURIComponent(o.url)+"&opts="+o.opts}window.location.href=window.location.protocol+"//"+window.location.host+"/v2/logout?returnTo="+encodeURIComponent(e)},continueLogin:function(e){var o=this.getQueryParam("state");window.location.href="/continue?state="+o},onSendEmailBtnClick:function(e){var o=DowJones.OneIdentity.getQueryVariable("uuid");o&&""!=o.trim()?this.postToCaps(o,this.conf.emailVerification).done(function(e,o,t){this.toggleLoadingStatus(!0)}.bind(this)).fail(function(e,o,t){var i=e.responseJSON;i&&i.errorReasonCodes&&this.handleCapsError(i.errorReasonCodes),this.toggleLoadingStatus(!1)}.bind(this)):this.showErrors("Sorry, we are unable to process your request currently. Please try again.")},postToCaps:function(e,o){var t={method:"POST",url:o,contentType:"application/json",headers:{"X-HTTP-Method-Override":"POST","X-REQUEST-SCHEME":"HTTPS","X-REMOTE-UUID":e,"X-REQUEST-EDITIONID":DowJones.OneIdentity.getEdition()}};return $.ajax(t)},toggleLoadingStatus:function(e){e?(this.$resendVerificationEmailContainer.hide(),this.$sentEmailVerificationContainer.show(),this.$container.addClass("loading")):(this.$resendVerificationEmailContainer.show(),this.$sentEmailVerificationContainer.hide(),this.$container.removeClass("loading"))},handleCapsError:function(e){var o,t=[];if(Array.isArray(e)){for(;o=e.shift();)switch(o){case"x-request-scheme-invalid":case"x-request-scheme-required":case"respType-invalid":case"respType-required":t.push("Some of the information does not match. Please contact customer service to correct your account.");break;case"user-notfound":t.push("We are unable to locate your account. Please contact customer service for further assistance.");break;case"no-pending-verification":t.push("Your account appears to have been verified. Please go back to Sign in.");break;case"X-REMOTE-UUID-required":case"X-REMOTE-UUID-minlength":case"X-REMOTE-UUID-maxlength":t.push("Some of the information does not match. Please contact customer service to correct your account.");break;default:t.push("Sorry, we are unable to process your request. Please contact customer service to correct your account.")}this.showErrors(t)}},showErrors:function(e){var o;this.toggleLoadingStatus(!1),this.$rtlSubmit.hide(),this.$cardTitle.hide(),this.$regError.addClass("error");var t=Object.prototype.toString.call(e);o="[object String]"===t?"<ul><li>"+e+"</li></ul>":"[object Array]"===t?"<ul><li>"+e.join("</li><li>")+"</li></ul>":e,this.$regError.html(o),this.$regError.show(),this.$container.find("div.call-to-action a").show()},clearErrors:function(){this.$container.find(".error").removeClass("error"),this.$container.find(".input-error").hide(),this.$regError.text(""),this.$regError.hide(),this.$cardTitle.show()},destroy:function(){this.clearErrors(),this.conf=null,this.$container=null,this.$regError=null,this.$rtlSubmit.off("click"),this.$rtlSubmit=null,this.$regOkBtn.off("click"),this.$regOkBtn=null,this.$sendEmailBtn.off("click"),this.$sendEmailBtn=null,this.$cardTitle=null,this.$resendVerificationEmailContainer=null,this.$sentEmailVerificationContainer=null,this.$brandLabel=null}}}(),function(){window.DowJones=window.DowJones||{},DowJones.FancyInput=function(){function e(e){var s=$(e);s.find(".fancy-text-input > label").click(o),s.find(".fancy-select .trigger").click(t),s.find(".fancy-select .options li").click(i),s.find(".fancy-select .options li").hover(n)}function o(e){$(e.target).siblings("input").focus()}function t(){var e=$(this);e.hasClass("open")?$(this).removeClass("open").next(".options").removeClass("open"):$(this).addClass("open").next(".options").addClass("open")}function i(){var e=$(this),o=(e.data("raw-value"),e.text());e.addClass("selected").siblings().removeClass("selected"),e.parents(".fancy-select").find(".trigger").text(o).removeClass("open").next(".options").removeClass("open")}function n(){$(this).addClass("hover").siblings().removeClass("hover")}return{init:e}}()}(),function(){window.DowJones=window.DowJones||{},DowJones.ForgotPasswordForm=function(){this.conf={usernameServiceForgotPW:"/consumeraccess/svc/forgotcredential/request.json",usernameServiceRoles:"/auth/roles/forgotpassword",usernameServiceServiceRoles:"/auth/roles/forgotpasswordWithUsername"},this.$container=$("#forgot-password"),this.$fpwForm=this.$container.find("form"),this.loginAttempts=0,this.chatLoginCount=0,this.invalidEntitlements=0,this.$email=this.$container.find("#fpw-email"),this.$emailError=this.$container.find(".fpw-email-error"),this.$errors=this.$container.find(".errors"),this.$fpwSubmit=this.$container.find(".fpw-submit"),this.$fpwSubmit.on("click",this.onEmailSubmit.bind(this)),this.$backToLogin=this.$container.find(".return-to-login"),this.$backToLogin.on("click",this.goToLogin.bind(this)),this.$emailNotFound=!1},DowJones.ForgotPasswordForm.prototype={run:function(){setTimeout(function(){this.$email.focus()}.bind(this),100)},onEmailSubmit:function(e){e.preventDefault(),this.clearErrors();var o=this,t=this.$email.val();this.toggleLoadingStatus(!0);var i={emailAddress:t,editionId:DowJones.OneIdentity.getEdition()};this.postToUserNameService(i,this.conf.usernameServiceForgotPW).done(function(e){page.show("/forgot-confirm"),o.toggleLoadingStatus(!1)}).fail(function(e){o.handleErrorFromUserNameService(e),o.$emailNotFound?(console.log("emailNotFound"),i.username=i.emailAddress,i.emailAddress=void 0,o.postToUserNameService(i,o.conf.usernameServiceForgotPW).done(function(e){page.show("/forgot-confirm"),o.toggleLoadingStatus(!1),console.log(arguments)}).fail(function(e){page.show("/forgot-confirm"),o.toggleLoadingStatus(!1)})):o.showErrors()})},postToUserNameService:function(e,o){var t={type:"POST",url:o,data:JSON.stringify(e),dataType:"json",headers:{"X-HTTP-Method-Override":"POST","X-REQUEST-SCHEME":"HTTPS","Content-Type":"application/json",Accept:"application/json"}};return $.ajax(t)},handleErrorFromUserNameService:function(e){if(e){var o=e.responseJSON?e.responseJSON:e.responseText?JSON.parse(e.responseText):void 0;o?o.errorReasonCodes&&$.inArray("username-format",o.errorReasonCodes)>=0?(this.chatLoginCount++,this.loginAttempts++,this.loginAttempts>=3?(this.loginAttempts>7,1):1,this.$errors.text("Invalid Username Format"),pageName="Error_password_forgot_UsernameDoesNotExists"):o.errorReasonCodes&&$.inArray("emailAddress-duplicate",o.errorReasonCodes)>=0?(this.chatLoginCount++,this.loginAttempts++,this.$errors.text(this.getTranslationFromToken("emailAddress-duplicate","There are more than one accounts with this email address. Please contact Customer Service for assistance.")),pageName="Error_password_forgot_MultipleAccounts"):o.errorReasonCodes&&$.inArray("authorization-failed",o.errorReasonCodes)>=0?(this.invalidEntitlements++,this.invalidEntitlements<3,1,this.$errors.text(this.getTranslationFromToken("oneIdAuthorizationFailed","We are unable to process your request as your authorization has failed. Please contact Customer Service for further assistance.")),pageName="Error_no_email_associated"):o.errorReasonCodes&&$.inArray("emailAddress-notfound",o.errorReasonCodes)>=0?(this.chatLoginCount++,this.loginAttempts++,this.$emailNotFound=!0,this.$errors.text(this.getTranslationFromToken("oneIdEmailNotFound","We could not locate the email address provided. Please contact Customer Service for further assistance.")),pageName="Error_password_forgot_EmailAddressDoesNotExists"):o.errorReasonCodes&&$.inArray("emailAddress-notassociated",o.errorReasonCodes)>=0?(this.chatLoginCount++,this.loginAttempts++,this.$errors.text(this.getTranslationFromToken("oneIdEmailNotAssociated","The email address is not associated with a user. Please contact Customer Service for further assistance.")),pageName="Error_password_forgot_EmailAddressNotAssociated"):o.errorReasonCodes&&$.inArray("username-notfound",o.errorReasonCodes)>=0?(this.chatLoginCount++,this.loginAttempts++,this.$errors.text(this.getTranslationFromToken("oneIdUserNotLocated","We could not locate the user provided. Please contact Customer Service for further assistance.")),pageName="Error_no_email_associated"):o.errorReasonCodes&&$.inArray("account-locked",o.errorReasonCodes)>=0?(this.chatLoginCount++,this.loginAttempts++,this.$errors.text(this.getTranslationFromToken("oneIdAccountLocked","Your account is locked. Please contact Customer Service for further assistance.")),pageName="Error_account-locked"):o.errorReasonCodes&&$.inArray("emailAddress-format",o.errorReasonCodes)>=0?(this.chatLoginCount++,this.loginAttempts++,this.$errors.text(this.getTranslationFromToken("oneIdInvalidEmailFormat","The email address format is invalid. Please correct and resubmit.")),this.$emailNotFound=!0,pageName="Error_password_forgot_EmailAddressDoesNotExists"):o.errorReasonCodes&&$.inArray("validationfailure",o.errorReasonCodes)>=0?pageName="Forgot Password Scrim ValidationFailure Error":(this.clearErrors(),1):this.clearErrors()}},getTranslationFromToken:function(e,o){return DowJones.OneIdentity.getTranslationFromToken(e,o)},showErrors:function(){this.toggleLoadingStatus(!1),this.$errors.addClass("error"),this.$errors.show()},clearErrors:function(){this.$container.find(".error").removeClass("error"),this.$emailError.hide(),this.$errors.hide()},toggleLoadingStatus:function(e){e?(this.$email.prop("disabled",!0),this.$fpwSubmit.prop("disabled",!0),this.$fpwForm.addClass("loading")):(this.$email.prop("disabled",!1),this.$fpwSubmit.prop("disabled",!1),this.$fpwForm.removeClass("loading"))},goToLogin:function(){DowJones.OneIdentity.goToLogin()},destroy:function(){this.$container=null,this.$fpwForm=null,this.$email=null,
this.$emailError=null,this.$errors=null,this.$fpwSubmit.off("click"),this.$fpwSubmit=null,this.$backToLogin.off("click"),this.$backToLogin=null,this.conf=null}}}(),function(){window.DowJones=window.DowJones||{},DowJones.ForgotPasswordConfirmation=function(){this.$container=$("#forgot-password-confirmation"),this.$resendEmailBtn=this.$container.find(".resend-email"),this.$resendEmailBtn.on("click",this.onResendEmail.bind(this))},DowJones.ForgotPasswordConfirmation.prototype={run:function(){setTimeout(function(){this.$backToSignIn.focus()}.bind(this),100)},onResendEmail:function(e){e.preventDefault(),this.clearErrors();var o=DowJones.OneIdentity.getQueryVariable("state");o?window.history.go(-2):window.location.href=DowJones.OneIdentity.getBrand().loginRedirect},clearErrors:function(){this.$container.find(".error").removeClass("error")},destroy:function(){this.$container=null,this.$resendEmailBtn.off("click"),this.$resendEmailBtn=null}}}(),function(){window.DowJones=window.DowJones||{},DowJones.languages={en:{oneIdActivateSubscription:"Activate your digital subscription",oneIdPwAlreadyUpdatedMsg:"Already updated your password?",anEmailWasSentToYou:"An email was sent to you with instructions on how to sign in.",emailVerificationSent:"An email with a verification link has been sent to the registered email address. Please check your email and verify your email address.",anEmailWithYourUsernameAndPassword1:"An email with your username and password reset instructions has been sent.",anEmailWithYourUsernameAndPassword:"An email with your username and password reset instructions has been sent. If you don't receive the email within a few minutes, please check your spam folder.",smsSent:"An SMS was sent with the access code.",and:"and",backToStep:"Back to previous step",backToSignIn:"Back to Sign In",byRegistering:"By registering, you agree to receive updates and special offers from other Dow Jones products and services.",clickHereToLearnMore:"Click here to learn more!",confirmPassword:"Confirm Password",connectYour:"Connect your",oneIdContinueTo:"Continue to",continueToProduct:"Continue to product",cookiePolicy:"Cookie Policy",FPFUI_CountryCode:"Country Code",customerService:"Customer Service",copyRightPhraseDJ:"Dow Jones, Inc. All rights reserved.",errorForDev210988:"Due to five unsuccessful login attempts, please check the verification box below, re-enter your login details and click Login. For password assistance, click 'Forgot your password?' below.",errorForUser210988:"Due to five unsuccessful login attempts, please check the verification box below, re-enter your login details and click Login. For password assistance, click 'Forgot your password?' below.",userEmail:"Email",emailLink:"email link",usernameOrEmail:"Email or username",enterSms:"Enter SMS code",bulkFirstName:"First Name",forLoggingInWith:"for logging in with",forgotYour:"Forgot your",forgotYourPre:"Forgot your",hide:"Hide",IAgreeToThe:"I agree to the",ifYouDontReceive:"If you don't receive the email within a few minutes, check your spam folder.",anEmailWithYourUsernameAndPassword2:"If you don't receive the email within a few minutes, please check your spam folder.",invalidAccessCode:"Invalid access code",invalidPhoneNumber:"Invalid phone number",keepMeSignedIn:"Keep me signed in",bulkLastName:"Last Name",lastNameColumn:"Last Name",oneIdLogIn:"Log in",loginLowerCase:"login",passwordLength:"Must be between 5 and 15 characters in length.",newPassword:"New Password",oneIdNewTo:"New to",nextTitle:"Next",noRegisterAndSignMeIn:"NO, REGISTER AND SIGN ME IN",notAMember:"Not a member?",ok:"OK",passwordCharacters:"Only letters and numbers are permitted.",optionGoBack:"Or go back to",signInSocial:"Or sign in with a social account:",password:"Password",oneIdPwExpired:"Password Expired",phoneNumberLabel:"Phone Number",regPolicyError:"Please agree to the Privacy and Cookie policies",oneIdTempPwCall:"Please call customer service to reset your password:",pleaseCheckYourEmail:"Please Check Your Email",registrationCompleteMsg2:"Please check your email and complete your registration by clicking on the link in the email.",registrationConfirmationMsg:"Please check your email and verify your email address to ensure we can send important information about your subscription.",chooseNewPassword:"Please choose a new password.",oneIdTempPwWarnMsg2:"Please click below to update your password.",confirmPasswordError:"Please confirm your new password",regPasswordError:"Please enter a proper password length.",regEmailError:"Please enter your email address",pleaseEnterYourEmailAddressOrUsername:"Please enter your email address or username below and we will\r\n                      email you with instructions on how to reset your password.",regFirstNameError:"Please enter your first name",regLastNameError:"Please enter your last name",enterNewPassword:"Please enter your new password",plsEntPassword:"Please enter your password",signInBelow:"Please sign in below",invalidPassword:"Please try again. You've entered a password that contains invalid characters.",resendVerificationEmailMsg:"Please verify your email address to ensure you are able to receive important information regarding your account",previousStep:"previous step",oneIdPrintSubscriber:"Print subscriber?",privacyPolicy:"Privacy Policy",registerHere:"register here.",registerNow:"Register Now",requestEmailLink:"Request email link",requestPasswordReset:"Request Password Reset",loginSMSRequest:"Request SMS code",resendEmail:"RESEND EMAIL",resetPassword:"Reset Password",sendL:"SEND LINK",sendSmsCode:"SEND SMS CODE",resendVerificationEmail:"Send Verification Email",show:"Show",signIn:"Sign In",signInWith:"Sign in with",signInWithA:"Sign in with a",signInWithAn:"Sign in with an",signInWithFacebook:"Sign in with Facebook",signInWithGoogle:"Sign in with Google",signOut:"Sign out",sms:"SMS",smsCode:"SMS Code",passwordMinLength:"Sorry, password must be at least 5 characters in length.",passwordMaxLength:"Sorry, password must be less than 15 characters.",invalidToken:"Sorry, this operation cannot be completed as the token is invalid or expired. Please resend the email to complete the operation.",submit:"Submit",subscribe:"Subscribe",success:"Success!",oneIdTempPwLbl:"Temporary Password",thankYou:"Thank You",thankYouExcl:"Thank You!",oneIdInvalidEmailFormat:"The email address format is invalid. Please correct and resubmit.",oneIdEmailNotAssociated:"The email address is not associated with a user. Please contact Customer Service for further assistance.",emailInUse:"The email you are trying to register with has already been used or connected to a different account, please try a different one.",regConfirmPwdError:"The passwords you entered do not match. Please try again.","emailAddress-duplicate":"There are more than one accounts with this email address. Please contact Customer Service for assistance.",toYourExistingSubscription:"to your existing subscription and preferences to sign in quickly in the future, and more easily share articles and comments with your friends.",oneIdTempPwUpdate:"Update password",emailOrUserName:"User ID or Email Address",usernameOrPassword:"username or password?",verifyCode:"VERIFY CODE",registrationConfirmationTitle:"Verify your Email Address",oneIdAuthorizationFailed:"We are unable to process your request as your authorization has failed. Please contact Customer Service for further assistance.",oneIdEmailNotFound:"We could not locate the email address provided. Please contact Customer Service for further assistance.",oneIdUserNotLocated:"We could not locate the user provided. Please contact Customer Service for further assistance.",unableToFindUser:"We were unable to find this email/username and password combination.",weWillEmailYou:"We will email you a link that you can use to sign in.",loginSMSMsg:"We will send you an SMS with the access code.",yesConnect:"Yes, connect",oneIdAccountLocked:"Your account is locked. Please contact Customer Service for further assistance.",passwordChanged:"Your password was successfully changed",registrationCompleteMsg:"Your registration is complete. We sent a confirmation email.",regVerifComplete:"Your registration verification is complete.",oneIdTempPwExpired:"Your temporary password has expired.",oneIdTempPwWarnMsg1:"You've logged in using a temporary password."},ja:{passwordLength:"５から15文字以内で設定してください。",and:"and",copyRightPhraseDJ:"Dow Jones, Inc. All rights reserved.",errorForDev210988:"Due to five unsuccessful login attempts, please check the verification box below, re-enter your login details and click Login. For password assistance, click 'Forgot your password?' below.",userEmail:"Eメール",requestEmailLink:"Eメールのリンクをリクエスト",emailLink:"Eメールリンク",signInWithFacebook:"Facebookでサインイン",signInWithGoogle:"Googleでサインイン",ok:"OK",sms:"SMS",smsCode:"SMSコード",loginSMSRequest:"SMSコードをリクエスト",enterSms:"SMSコードを入力",sendSmsCode:"SMSコードを送信",oneIdAccountLocked:"アカウントがロックされました。カスタマーサービスに連絡してください。",resendVerificationEmailMsg:"アカウントに関する重要情報を受信するためにメールアドレスを確認してください。",smsSent:"アクセスコードがSMSで送信されました。",invalidAccessCode:"アクセスコードが無効です",loginSMSMsg:"アクセスコードをSMSで送信します。",thankYou:"ありがとうございました。",thankYouExcl:"ありがとうございました。",noRegisterAndSignMeIn:"いいえ、登録してサインインする",customerService:"カスタマーサービス",oneIdTempPwCall:"カスタマーサービスに連絡して、パスワードをリセットしてください。",cookiePolicy:"クッキーに関する方針",verifyCode:"コードを認証",registerHere:"ここで登録してください。",unableToFindUser:"このメール/ユーザー名とパスワードの組み合わせが見つかりませんでした。","emailAddress-duplicate":"このメールアドレスは1件以上のアカウントに登録されています。カスタマーサービスに連絡してください。",signOut:"サインアウト",signIn:"サインイン",keepMeSignedIn:"サインインしたままにする",backToSignIn:"サインインに戻る",anEmailWasSentToYou:"サインイン方法に関するメールが送信されました。",weWillEmailYou:"サインイン用のリンクをメールで送信します。",toYourExistingSubscription:"すると、既存の購読契約および環境設定に次回から素早くサインインして、友達と簡単に記事やコメントを共有できます。",yesConnect:"はい、次にアクセス",password:"パスワード",passwordChanged:"パスワードが変更されました。",requestPasswordReset:"パスワードのリセットをリクエスト",oneIdPwExpired:"パスワードの有効期限が切れています。",resetPassword:"パスワードをリセット",plsEntPassword:"パスワードを入力",oneIdTempPwUpdate:"パスワードを更新",oneIdPwAlreadyUpdatedMsg:"パスワードを更新されましたか？",confirmPassword:"パスワードを確認",regPolicyError:"プライバシーおよびクッキーに関する方針に同意してください。",continueToProduct:"プロダクトに進む",signInSocial:"またはソーシャルアカウントでサインインする：",optionGoBack:"または次に戻る：",oneIdEmailNotFound:"メールアドレスが確認できませんでした。カスタマーサービスに連絡してください。",oneIdInvalidEmailFormat:"メールアドレスの形式に誤りがあります。訂正して再度実行してください。",usernameOrEmail:"メールアドレスまたはユーザー名",regEmailError:"メールアドレスを入力してください",registrationConfirmationTitle:"メールアドレスを認証",resendEmail:"メールを再送",registrationCompleteMsg2:"メールを確認して、メールに付記されたリンクをクリックし、登録手続きを完了してください。",pleaseCheckYourEmail:"メールを確認してください",emailOrUserName:"ユーザーIDまたはメールアドレス",oneIdEmailNotAssociated:"ユーザーのメールアドレスが一致しませんでした。カスタマーサービスに連絡してください。",oneIdUserNotLocated:"ユーザーを確認できませんでした。カスタマーサービスに連絡してください。",anEmailWithYourUsernameAndPassword1:"ユーザー名とパスワードのリセット方法に関するメールが送信されました。",anEmailWithYourUsernameAndPassword:"ユーザー名とパスワードのリセット方法に関するメールが送信されました。数分以内にメールが届かない場合は、迷惑メールのフォルダを確認してください。",usernameOrPassword:"ユーザー名またはパスワード",sendL:"リンクを送信",loginLowerCase:"ログイン",oneIdLogIn:"ログイン",errorForUser210988:"ログインに5回失敗したため、下記「照合」のボックスにチェックを入れて、ログイン情報を再入力し、「ログイン」をクリックしてください。パスワードを忘れた場合は、以下の「パスワードを忘れた場合。」をクリックしてください。",forgotYourPost:"を忘れた場合",oneIdTempPwWarnMsg2:"下をクリックしてパスワードを更新してください。",pleaseEnterYourEmailAddressOrUsername:"下記にメールアドレスかユーザー名を入力して、パスワードリセットのメールを受信してください。",registerNow:"今すぐ登録",signInBelow:"以下でサインインしてください",oneIdTempPwLbl:"仮パスワード",oneIdTempPwWarnMsg1:"仮パスワードでログインされています。",oneIdTempPwExpired:"仮パスワードの有効期限が切れています。",notAMember:"会員ではない場合",success:"作業が完了しました。",privacyPolicy:"個人情報保護方針",regConfirmPwdError:"入力したパスワードが一致しません。再度お試しください。",invalidPassword:"再度お試しください。入力されたパスワードに無効な文字が含まれていました。",forgotYour:"再設定－",forgotYourPre:"再設定－",oneIdNewTo:"初心者",previousStep:"前のステップ",backToStep:"前のステップに戻る",oneIdPrintSubscriber:"印刷版購読者ですか？",bulkFirstName:"名",regFirstNameError:"名を入力してください",FPFUI_CountryCode:"国コード",bulkLastName:"姓",lastNameColumn:"姓",regLastNameError:"姓を入力してください",submit:"実行",ifYouDontReceive:"数分以内にメールが届かない場合は、迷惑メールのフォルダを確認してください。",anEmailWithYourUsernameAndPassword2:"数分以内にメールが届かない場合は、迷惑メールのフォルダを確認してください。",enterNewPassword:"新しいパスワードを入力。",confirmPasswordError:"新しいパスワードを確認してください。",chooseNewPassword:"新しいパスワードを設定。",newPassword:"新規パスワード",signInWith:"次でサインイン：",signInWithA:"次でサインイン：",signInWithAn:"次でサインイン：",forLoggingInWith:"次でログインするために：",connectYour:"次にアクセス",IAgreeToThe:"次に同意する：",nextTitle:"次へ",oneIdContinueTo:"次へ：",regPasswordError:"正しい長さのパスワードを入力してください。",invalidToken:"申し訳ありませんが、トークンが無効または期限切れのため、操作を実行できません。再度メールを送信して、操作を完了してください。",passwordMaxLength:"申し訳ありませんが、パスワードは15文字以内にしてください。",passwordMinLength:"申し訳ありませんが、パスワードは5文字以上にしてください。",registrationCompleteMsg:"登録が完了し、確認メールが送信されました。",emailVerificationSent:"登録したメールアドレスに認証用のリンクが付記されたメールが送信されました。メールを確認してメールアドレスを認証してください。",emailInUse:"登録しようとしている電子メールがすでに使用されているか、別のアカウントに接続されています。別のアカウントに接続してみてください。",byRegistering:"登録すると同時に、その他のDow Jones製品やサービスに関する更新情報や特典情報を受信することに同意されたものとみなされます。",regVerifComplete:"登録認証が完了しました。",passwordCharacters:"英数字のみ使用してください。",show:"表示",clickHereToLearnMore:"詳細は、こちらをクリックしてご覧ください。",resendVerificationEmail:"認証メールを送信",oneIdAuthorizationFailed:"認証確認ができませんでした。カスタマーサービスに連絡してください。",registrationConfirmationMsg:"購読契約に関する重要な情報を確実に受信できるように、メールを確認して、メールアドレスを認証してください。",subscribe:"追加する",hide:"隠す",oneIdActivateSubscription:"電子版購読を有効化",phoneNumberLabel:"電話番号",invalidPhoneNumber:"電話番号が無効です"},zhtw:{copyRightPhraseDJ:"Dow Jones, Inc. 版權所有。",errorForDev210988:"Due to five unsuccessful login attempts, please check the verification box below, re-enter your login details and click Login. For password assistance, click 'Forgot your password?' below.",nextTitle:"下一個",noRegisterAndSignMeIn:"不，為我登記並登錄",signInWithFacebook:"使用臉書登錄",signInWithGoogle:"使用谷歌登錄",keepMeSignedIn:"保持登錄狀態",previousStep:"先前步驟",oneIdPrintSubscriber:"列印版本訂閱戶？",oneIdNewTo:"剛開始使用",anEmailWithYourUsernameAndPassword1:"包含您的用戶名和密碼重設說明的電郵已發送。",anEmailWithYourUsernameAndPassword:"包含您的用戶名和密碼重設說明的電郵已發送。如果您在幾分鐘內未收到電郵，請檢查您的垃圾郵件文件夾。",invalidAccessCode:"取用代碼無效",passwordCharacters:"只允許使用字母和數字。",bulkFirstName:"名字",submit:"呈交",and:"和",oneIdActivateSubscription:"啟用您的數碼訂閱",clickHereToLearnMore:"單擊此處以瞭解更多！",FPFUI_CountryCode:"國家代碼",registerHere:"在此登記。",ifYouDontReceive:"如果您在幾分鐘內未收到電郵，請檢查您的垃圾郵件文件夾。",anEmailWithYourUsernameAndPassword2:"如果您在幾分鐘內未收到電郵，請檢查您的垃圾郵件文件夾。",bulkLastName:"姓氏",lastNameColumn:"姓氏",customerService:"客戶服務",password:"密碼",oneIdPwExpired:"密碼已過期",passwordMaxLength:"對不起，密碼必須低於15個字符。",passwordMinLength:"對不起，密碼長度必須至少5個字符。",invalidToken:"對不起，由於權標無效或已過期而無法完成此操作。請重發電郵以完成操作。",success:"已成功！",cookiePolicy:"庫記政策",forgotYour:"忘了您的",forgotYourPre:"忘了您的",oneIdTempPwWarnMsg1:"您已使用臨時密碼登錄。",regConfirmPwdError:"您所輸入的密碼不匹配。 請再試一次。",toYourExistingSubscription:"您現有的訂閱和設置以方便以後簡快登錄，以及更容易地與友人分享文章。",emailInUse:"您用於登記的電郵地址已被使用或已連接到其他的戶口，請使用另外電郵地址重試。",passwordChanged:"您的密碼已成功更改",oneIdAccountLocked:"您的戶口已被鎖。請聯繫客戶服務組以獲幫助。",registrationCompleteMsg:"您的登記已完成。我們給您發送了確認電郵。",regVerifComplete:"您的登記驗證已完成。",oneIdTempPwExpired:"您的臨時密碼已過期。",loginSMSMsg:"我們將為您發送帶有取用代碼的短信。",weWillEmailYou:"我們將通過電郵給您發送一個可用於登錄的鏈接。",oneIdUserNotLocated:"我們找不到所提供的用戶。請聯繫客戶服務組以獲幫助。",oneIdEmailNotFound:"我們找不到所提供的電郵地址。請聯繫客戶服務組以獲幫助。",unableToFindUser:"我們無法尋獲此電郵/用戶名和密碼的組合。",oneIdAuthorizationFailed:"我們無法處理您的請求，因您的授權失效。請聯繫客戶服務組以獲幫助。",IAgreeToThe:"我同意",signInSocial:"或使用社交戶口登錄：",optionGoBack:"或返回",newPassword:"新密碼",oneIdPwAlreadyUpdatedMsg:"是否已更新了您的密碼？",yesConnect:"是的，連接",oneIdTempPwUpdate:"更新密碼",oneIdEmailNotAssociated:"此電郵地址沒有關聯的用戶。請聯繫客戶服務組以獲幫助。",oneIdInvalidEmailFormat:"此電郵地址的格式無效。請更正並重新提交。",registerNow:"現在登記",usernameOrPassword:"用戶名或密碼？",emailOrUserName:"用戶名或電郵",errorForUser210988:"由於5次登錄嘗試不成功，請檢查以下的驗證框，重新輸入您的登錄詳情，然後點擊登錄。關於密碼幫助，請單擊以下的「忘了您的密碼？」。",signOut:"登出",signIn:"登錄",loginLowerCase:"登錄",oneIdLogIn:"登錄",signInWith:"登錄使用",signInWithA:"登錄使用",signInWithAn:"登錄使用",forLoggingInWith:"登錄據於",sendSmsCode:"發送短信代碼",sendL:"發送鏈接",resendVerificationEmail:"發送驗證電郵",sms:"短信",smsCode:"短信代碼",ok:"確定",registrationConfirmationTitle:"確認你的電郵地址",confirmPassword:"確證密碼",oneIdTempPwLbl:"臨時密碼",subscribe:"訂閱",invalidPassword:"請再試。您輸入的密碼包含無效字符。",regPolicyError:"請同意隱私和庫記政策",signInBelow:"請在下方登錄",pleaseEnterYourEmailAddressOrUsername:"請在下方輸入您的電郵地址或用戶名，我們將通過電郵給您發送如何重設密碼的說明。",pleaseCheckYourEmail:"請查看你的電郵",registrationConfirmationMsg:"請檢查您的電郵並驗證您的電郵地址，以確保我們可給您發送有關訂閱的重要信息。",registrationCompleteMsg2:"請檢查您的電郵並點擊其中的鏈接以完成登記。",requestPasswordReset:"請求密碼重設",loginSMSRequest:"請求短信代碼",requestEmailLink:"請求電郵鏈接",confirmPasswordError:"請確認您的新密碼",oneIdTempPwCall:"請致電客戶服務以重設您的密碼：",regFirstNameError:"請輸入您的名字",regLastNameError:"請輸入您的姓氏",plsEntPassword:"請輸入您的密碼",enterNewPassword:"請輸入您的新密碼",regEmailError:"請輸入您的電郵地址",regPasswordError:"請輸入正確的密碼長度。",chooseNewPassword:"請選擇一個新的密碼。",resendVerificationEmailMsg:"請驗證您的電郵地址以確保您可收到有關您的戶口的重要信息",oneIdTempPwWarnMsg2:"請點擊下方以更新您的密碼。",thankYou:"謝謝",thankYouExcl:"謝謝！",enterSms:"輸入短信代碼",oneIdContinueTo:"轉向",continueToProduct:"轉向產品",backToStep:"返回上一步驟",backToSignIn:"返回登錄","emailAddress-duplicate":"這個電郵地址有多個戶口。請聯繫客戶服務以獲幫助。",byRegistering:"通過登記，您同意接收其他有關道瓊斯產品和服務的更新和特別優惠。",connectYour:"連接您的",resendEmail:"重發電郵",resetPassword:"重設密碼",passwordLength:"長度必須在5到15個字符之間。",smsSent:"附有取用代碼的短信已發送。",anEmailWasSentToYou:"附有如何登錄說明的電郵已發送給您。",emailVerificationSent:"附有驗證鏈接的電郵已發送到登記地址。請檢查您的郵件並驗證您的電郵地址。",privacyPolicy:"隱私政策",hide:"隱藏",phoneNumberLabel:"電話號碼",invalidPhoneNumber:"電話號碼無效",userEmail:"電郵",usernameOrEmail:"電郵或用戶名",emailLink:"電郵鏈接",notAMember:"非會員？",show:"顯示",verifyCode:"驗證代碼"},zhcn:{copyRightPhraseDJ:"Dow Jones, Inc. 版权所有。",errorForDev210988:"Due to five unsuccessful login attempts, please check the verification box below, re-enter your login details and click Login. For password assistance, click 'Forgot your password?' below.",nextTitle:"下一个",noRegisterAndSignMeIn:"不，为我登记并登录",oneIdTempPwLbl:"临时密码",signInWithFacebook:"使用脸书登录",signInWithGoogle:"使用谷歌登录",keepMeSignedIn:"保持登录状态",previousStep:"先前步骤",oneIdNewTo:"刚开始使用",anEmailWithYourUsernameAndPassword1:"包含您的用户名和密码重设说明的电邮已发送。",anEmailWithYourUsernameAndPassword:"包含您的用户名和密码重设说明的电邮已发送。如果您在几分钟内未收到电邮，请检查您的垃圾邮件文件夹。",clickHereToLearnMore:"单击此处以了解更多！",sendSmsCode:"发送短信代码",sendL:"发送链接",resendVerificationEmail:"发送验证电邮",invalidAccessCode:"取用代码无效",passwordCharacters:"只允许使用字母和数字。",bulkFirstName:"名字",oneIdActivateSubscription:"启用您的数码订阅",submit:"呈交",and:"和",FPFUI_CountryCode:"国家代码",registerHere:"在此登记。",ifYouDontReceive:"如果您在几分钟内未收到电邮，请检查您的垃圾邮件文件夹。",anEmailWithYourUsernameAndPassword2:"如果您在几分钟内未收到电邮，请检查您的垃圾邮件文件夹。",bulkLastName:"姓氏",lastNameColumn:"姓氏",customerService:"客户服务",password:"密码",oneIdPwExpired:"密码已过期",passwordMaxLength:"对不起，密码必须低于15个字符。",passwordMinLength:"对不起，密码长度必须至少5个字符。",invalidToken:"对不起，由于权标无效或已过期而无法完成此操作。 请重发电邮以完成操作。",success:"已成功！",cookiePolicy:"库记政策",forgotYour:"忘了您的",forgotYourPre:"忘了您的",oneIdTempPwWarnMsg1:"您已使用临时密码登录。",regConfirmPwdError:"您所输入的密码不匹配。 请再试一次。",toYourExistingSubscription:"您现有的订阅和设置以方便以后简快登录，以及更容易地与友人分享文章。",emailInUse:"您用于登记的电邮地址已被使用或已连接到其他的户口，请使用另外电邮地址重试。",oneIdTempPwExpired:"您的临时密码已过期。",passwordChanged:"您的密码已成功更改",oneIdAccountLocked:"您的户口已被锁。请联系客户服务组以获帮助。",registrationCompleteMsg:"您的登记已完成。我们给您发送了确认电邮。",regVerifComplete:"您的登记验证已完成。",loginSMSMsg:"我们将为您发送带有取用代码的短信。",weWillEmailYou:"我们将通过电邮给您发送一个可用于登录的链接。",oneIdUserNotLocated:"我们找不到所提供的用户。请联系客户服务组以获帮助。",oneIdEmailNotFound:"我们找不到所提供的电邮地址。请联系客户服务组以获帮助。",oneIdAuthorizationFailed:"我们无法处理您的请求，因您的授权失效。请联系客户服务组以获帮助。",unableToFindUser:"我们无法寻获此电邮/用户名和密码的组合。",IAgreeToThe:"我同意",signInSocial:"或使用社交户口登录：",optionGoBack:"或返回",oneIdPrintSubscriber:"打印版本订阅户？",newPassword:"新密码",oneIdPwAlreadyUpdatedMsg:"是否已更新了您的密码？",yesConnect:"是的，连接",show:"显示",oneIdTempPwUpdate:"更新密码",oneIdEmailNotAssociated:"此电邮地址没有关联的用户。请联系客户服务组以获帮助。",oneIdInvalidEmailFormat:"此电邮地址的格式无效。请更正并重新提交。",registerNow:"现在登记",usernameOrPassword:"用户名或密码？",emailOrUserName:"用户名或电邮",errorForUser210988:"由于5次登录尝试不成功，请检查以下的验证框，重新输入您的登录详情，然后点击登录。关于密码帮助，请单击以下的「忘了您的密码？」。",phoneNumberLabel:"电话号码",invalidPhoneNumber:"电话号码无效",userEmail:"电邮",usernameOrEmail:"电邮或用户名",emailLink:"电邮链接",signOut:"登出",signIn:"登录",loginLowerCase:"登录",oneIdLogIn:"登录",signInWith:"登录使用",signInWithA:"登录使用",signInWithAn:"登录使用",forLoggingInWith:"登录据于",sms:"短信",smsCode:"短信代码",ok:"确定",registrationConfirmationTitle:"确认你的电邮地址",confirmPassword:"确证密码",subscribe:"订阅",invalidPassword:"请再试。 您输入的密码包含无效字符。",regPolicyError:"请同意隐私和库记政策",signInBelow:"请在下方登录",pleaseEnterYourEmailAddressOrUsername:"请在下方输入您的电邮地址或用户名，我们将通过电邮给您发送如何重设密码的说明。",pleaseCheckYourEmail:"请查看你的电邮",registrationCompleteMsg2:"请检查您的电邮并点击其中的链接以完成登记。",registrationConfirmationMsg:"请检查您的电邮并验证您的电邮地址，以确保我们可给您发送有关订阅的重要信息。",requestPasswordReset:"请求密码重设",requestEmailLink:"请求电邮链接",loginSMSRequest:"请求短信代码",oneIdTempPwWarnMsg2:"请点击下方以更新您的密码。",confirmPasswordError:"请确认您的新密码",oneIdTempPwCall:"请致电客户服务以重设您的密码：",regFirstNameError:"请输入您的名字",regLastNameError:"请输入您的姓氏",plsEntPassword:"请输入您的密码",enterNewPassword:"请输入您的新密码",regEmailError:"请输入您的电邮地址",regPasswordError:"请输入正确的密码长度。",chooseNewPassword:"请选择一个新的密码。",resendVerificationEmailMsg:"请验证您的电邮地址以确保您可收到有关您的户口的重要信息",thankYou:"谢谢",thankYouExcl:"谢谢！",oneIdContinueTo:"转向",continueToProduct:"转向产品",enterSms:"输入短信代码",backToStep:"返回上一步骤",backToSignIn:"返回登录","emailAddress-duplicate":"这个电邮地址有多个户口。请联系客户服务以获帮助。",connectYour:"连接您的",byRegistering:"通过登记，您同意接收其他有关道琼斯产品和服务的更新和特别优惠。",resendEmail:"重发电邮",resetPassword:"重设密码",passwordLength:"长度必须在5到15个字符之间。",smsSent:"附有取用代码的短信已发送。",anEmailWasSentToYou:"附有如何登录说明的电邮已发送给您。",emailVerificationSent:"附有验证链接的电邮已发送到登记地址。请检查您的邮件并验证您的电邮地址。",privacyPolicy:"隐私政策",hide:"隐藏",notAMember:"非会员？",verifyCode:"验证代码"}}}(),function(){window.DowJones=window.DowJones||{},DowJones.LoginForm=function(e){this.conf={registrationPath:"/consumeraccess/svc/registration/user.json?mode=create",auth0IdentityPath:"/oauth/ro",checkProUserPath:"/consumeraccess/svc/verifyPeVcProUser.json"},this.socialComponent=new DowJones.SocialLogins,this.authZeroClient=DowJones.OneIdentity.initializeAuthZero();var o=DowJones.OneIdentity.getLoginOptions(window),t=o.email,i=o.sms,n=o.google||o.facebook,s=o.subscribe,r=o.activatePrintSubscription,a=o.oneTimeLink;this.hidePasswordField=o.passwordField,this.brand=DowJones.OneIdentity.getBrand(),this.$container=$("#basic-login"),this.$oneTimeLinkLabel=this.$container.find(".one-time-link-card"),this.$oneTimeLinkLabel.toggle(a),this.applyOneTimeLinkingText(),this.$oneTimeLinkButtons=this.$container.find(".create-connect"),this.$oneTimeLinkButtons.toggle(a),this.$container.find(".sign-in-title").toggle(!a),this.$container.find(".sign-in").toggle(!a),this.$email=this.$container.find("#username"),this.$emailError=this.$container.find(".username-error"),this.$password=this.$container.find("#password"),this.$passwordContainer=this.$container.find("#password-card-container"),this.$passwordError=this.$container.find(".password-error"),this.$errorContainer=this.$container.find(".error-container"),this.$errors=this.$container.find("#login-errors"),this.$recaptchaError=this.$container.find("#recaptcha-error"),this.$connectButton=this.$container.find(".basic-login-connect"),this.$loginForm=this.$container.find("form"),this.$loginForm.on("submit",this.login.bind(this)),this.$createConnectButton=this.$container.find(".basic-create-connect"),this.$createConnectButton.on("click",this.createConnectAccount.bind(this)),this.$connectButton.on("click",this.connectToExistingAccount.bind(this)),this.$forgotLink=this.$container.find(".forgot-link"),this.$forgotLink.on("click",this.jumpToForget.bind(this)),n?this.socialComponent.toggleSocialLogins():this.socialComponent.removeSocialCard(),this.$smsLogin=this.$container.find(".login-sms"),this.$smsLogin.toggle(i),this.$smsLogin.on("click",this.onSMSLogin.bind(this)),this.$emailLink=this.$container.find(".login-email"),this.$emailLink.toggle(t),this.$emailLink.on("click",this.onEmailLinkClick.bind(this)),this.$rememberMeContainer=this.$container.find("#rememberme-card-container"),this.$rememberMeCheckBox=this.$container.find("#rememberme-checkbox"),this.$rememberMe=this.$container.find("#rememberme"),this.$rememberMe.on("click",this.onRememberMeClick.bind(this)),this.$rememberMeLabel=this.$container.find("#rememberme-label"),this.$rememberMeLabel.on("click",this.onRememberMeClick.bind(this)),this.$loginOptionsContainer=this.$container.find("#login-options-container"),this.$newMemberLink=this.$container.find(".not-a-member-link"),this.$newMemberLink.on("click",this.onNewMemberLinkClick.bind(this)),this.$registrationPopupEnabled=!1,this.$passWordToggle=this.$container.find(".password-toggle"),this.$passWordToggle.on("click",this.onTogglePasswordShow.bind(this)),this.showLoginOptions(n,i,t),this.$activatePrintSubscription=this.$container.find("#activate-print-subscription"),this.$activatePrintSubscription.toggle(r),this.$subscribeCard=this.$container.find("#subscribe-card"),this.$subscribeCard.toggle(s),this.$subscribeButton=this.$container.find("#go-to-subscribe"),this.$subscribeButton.on("click",this.goToSubscribe.bind(this)),this.$activateSubscriptionLink=this.$container.find("#activate-subscription"),this.$activateSubscriptionLink.on("click",this.goToActivateSubscription.bind(this)),this.$subscriberBrandLabel=this.$container.find("#subscribe-brand"),this.$recaptchaContainer=this.$container.find("#recaptcha-container"),this.$submitButton=this.$container.find(".solid-button.basic-login-submit"),this.$nextButton=this.$container.find(".next-step .solid-button"),this.$nextButton.toggle(!1),this.auth0config=e,this.lang=DowJones.OneIdentity&&DowJones.OneIdentity.uiLocales?DowJones.OneIdentity.uiLocales.language:"en"},DowJones.LoginForm.prototype={run:function(){this.$errors.detach(),this.applyBrandToSubscribeCard(),this.setCookies(),this.managePasswordFieldBehavior(this.brand.name),this.autoPopulateUsername(),/Mobi/.test(navigator.userAgent)||setTimeout(function(){this.$email.focus()}.bind(this),100);var e=this;window.onloadCallback=function(){grecaptcha.render("recaptcha-container",{sitekey:DowJones.Config.grecaptchaSitekey,hl:e.getLanguageForRecaptcha(),callback:function(){e.enableSubmitButton()}})}},jumpToForget:function(e){e.preventDefault(),this.$forgotLink.attr("href")&&""!==this.$forgotLink.attr("href")?self.location.href=this.$forgotLink.attr("href"):page.show("/forgot")},getDecodedState:function(){var e=DowJones.OneIdentity.getQueryVariable("state"),o=JSON.stringify(e);return JSON.parse(o)},applyOneTimeLinkingText:function(){var e=this.getDecodedState(),o=DowJones.OneIdentity.getQueryVariable("login_hint");if(e.hasOwnProperty("link")||o){var t=e.hasOwnProperty("link")?e.link:o;try{var i=Auth0.prototype.decodeJwt(t),n=i.value;this.$container.find(".user-name").append(n.given_name+" "+n.family_name),this.$container.find(".user-email").append(n.email),this.$container.find(".social-provider").append(this.getPartner(n.partner||"").toLowerCase())}catch(s){}}},autoPopulateUsername:function(){const e=DowJones.OneIdentity.getQueryVariable("login_hint");null===e||""===e||e.startsWith("ey")||this.$email.val(e)},createAuth0Identity:function(e){var o=DowJones.Config&&DowJones.Config.resource_owner_client_id?DowJones.Config.resource_owner_client_id:DowJones.OneIdentity.getQueryVariable("client"),t={client_id:o,username:e.username,password:e.password,connection:"DJldap",grant_type:"password",scope:"openid djid"};return this.postToCaps(t,this.conf.auth0IdentityPath)},login:function(e){if(e.preventDefault(),this.clearErrors(),this.validateForm()){var o=this.$email.val(),t=this.$password.val();this.toggleLoadingStatus(!0),this.setCookies(),this.postToAuthEndpoint(o,t)}},connectToExistingAccount:function(e){if(e.preventDefault(),this.clearErrors(),this.validateForm()){var o=DowJones.OneIdentity.getQueryVariable("login_hint"),t=Auth0.prototype.decodeJwt(o),i=t&&t.value&&t.value.auth0_saved_state?t.value.auth0_saved_state:DowJones.OneIdentity.authZeroState,n=this.$email.val(),s=this.$password.val();this.toggleLoadingStatus(!0),this.setCookies();var r=this;this.createAuth0Identity({username:n,password:s}).done(function(){r.postToAuthEndpointWithState(n,s,i)}).fail(function(){r.onLoginError()})}},createConnectAccount:function(e){e.preventDefault(),this.clearErrors();var o=DowJones.OneIdentity.getQueryVariable("login_hint"),t=Auth0.prototype.decodeJwt(o);this.setCookies(),this.registerAccount(t.value)},validateForm:function(){return 0===this.$email.val().length?(this.$emailError.show(),this.$email.addClass("error"),!1):0!==this.$password.val().length||(this.$passwordError.show(),this.$password.addClass("error"),!1)},clearErrors:function(){this.$errorContainer.hide(),this.$errors.hide(),this.$container.find(".error").removeClass("error"),this.$emailError.hide(),this.$passwordError.hide()},toggleLoadingStatus:function(e){e?(this.$email.prop("disabled",!0),this.$password.prop("disabled",!0),this.$connectButton.prop("disabled",!0),this.$loginForm.addClass("loading")):(this.$email.prop("disabled",!1),this.$password.prop("disabled",!1),this.$connectButton.prop("disabled",!1),this.$loginForm.removeClass("loading"))},onRememberMeClick:function(e){this.toggleCheckbox()},setCookies:function(){var e="";return e=this.$rememberMeCheckBox.prop("checked")?"djcs_kli=1;path=/;domain=.dowjones.com":"djcs_kli=0;path=/;domain=.dowjones.com",this.auth0config&&this.auth0config.maxKli&&(e+=";expires="+this.getMaxKliExpirationDateString()+";max-age="+this.auth0config.maxKli),document.cookie=e,e},toggleCheckbox:function(){var e=this.$rememberMeCheckBox.prop("checked");this.$rememberMeCheckBox.prop("checked",!e)},getMaxKliExpirationDateString:function(){var e=new Date;return e.setTime(e.getTime()+1e3*this.auth0config.maxKli),e.toUTCString()},isEmailAlreadyUsed:function(e){return e.indexOf("emailAddress-notAvailable")>=0||e.indexOf("emailAddress-duplicate")>=0},getLoginErrorMessage:function(e){var o="";return o=e&&this.isEmailAlreadyUsed(e.reasonCodes)?DowJones.languages?DowJones.languages[this.lang].emailInUse:"The email you are trying to register with has already been used or connected to a different account, please try a different one.":DowJones.languages?DowJones.languages[this.lang].unableToFindUser:"We were unable to find this email/username and password combination."},onLoginError:function(e){this.$recaptchaError.detach(),this.$errorContainer.append(this.$errors),this.$errorContainer.append(this.$recaptchaError),window.DowJones.OneIdentity.trackEvent({module:"login-error"},"view");var o=0,t=parseInt(this.getCookieByName("LF"));t&&(o=t),o+=1,document.cookie="LF="+o,this.toggleLoadingStatus(!1);var i=this.getLoginErrorMessage(e);this.$errors.html(i),this.$email.addClass("error"),this.$password.addClass("error"),this.$errors.show(),this.$errorContainer.show(),this.deleteCookie("djcs_kli")},onEmailLinkClick:function(e){e.preventDefault(),page.show("/email-link")},onNewMemberLinkClick:function(e){if(e.preventDefault(),this.$newMemberLink.attr("href")&&""!==this.$newMemberLink.attr("href"))if(this.$registrationPopupEnabled){var o=screen.width/2-250,t=screen.height/2-300;window.open(this.$newMemberLink.attr("href"),"","width=500, height=600, top="+t+", left="+o)}else self.location.href=this.$newMemberLink.attr("href");else page.show("/user-registration")},onSMSLogin:function(e){e.preventDefault(),page.show("/sms-phone")},onSocialLogin:function(e){e.preventDefault(),this.socialComponent.toggleSocialLogins()},showLoginOptions:function(e,o,t){var i=[];e&&i.push("social"),o&&i.push("sms"),t&&i.push("email");var n="#login-options-"+i.join("-");this.$container.find(n).show()},onTogglePasswordShow:function(e){e.preventDefault();var o=DowJones.OneIdentity&&DowJones.OneIdentity.uiLocales?DowJones.OneIdentity.uiLocales.language:"en",t=this.$password.attr("type");"password"==t?(this.$passWordToggle.text(DowJones.languages?DowJones.languages[o].hide:"Hide"),this.$password.attr("type","text")):(this.$passWordToggle.text(DowJones.languages?DowJones.languages[o].show:"Show"),this.$password.attr("type","password"))},postToAuthEndpoint:function(e,o){var t={username:e,password:o,connection:DowJones.OneIdentity.getQueryVariable("connection")||"DJldap",scope:DowJones.OneIdentity.getQueryVariable("scope")||"openid",state:DowJones.OneIdentity.authZeroState};if(this.auth0config&&this.auth0config.extraParams)for(var i in this.auth0config.extraParams)this.auth0config.extraParams.hasOwnProperty(i)&&(t[i]=this.auth0config.extraParams[i]);
var n=this;this.authZeroClient.login(t,function(e){e?n.onLoginError():document.cookie="LF=0"})},postToAuthEndpointWithState:function(e,o,t){var i={username:e,password:o,connection:DowJones.OneIdentity.getQueryVariable("connection")||"DJldap",scope:DowJones.OneIdentity.getQueryVariable("scope")||"openid"};if(this.auth0config&&this.auth0config.internalOptions)for(var n in this.auth0config.internalOptions)this.auth0config.internalOptions.hasOwnProperty(n)&&(i[n]=this.auth0config.internalOptions[n]);i.state=t;var s=this;this.authZeroClient.login(i,function(e){e&&s.onLoginError()})},getRandomPassword:function(){return Math.random().toString(36).slice(2,12)},getPartner:function(e){return e.toLowerCase().indexOf("google")>=0?"GOOGLE":e.toLowerCase().indexOf("facebook")>=0?"FACEBOOK":e},registerAccount:function(e){var o=this.getRandomPassword(),t=this.getPartner(e.partner),i={firstName:e.given_name,lastName:e.family_name,emailAddress:e.email,password:o,confirmPassword:o,displayContextId:"SOCIAL_CONNECT",partner:t,partnerIdentityKey:e.partnerIdentityKey,editionId:DowJones.OneIdentity.getEdition(),returnLink:DowJones.OneIdentity.getBrand().homePage},n=e.auth0_saved_state||DowJones.OneIdentity.authZeroState;this.toggleLoadingStatus(!0);var s=this;this.postToCaps(i,this.conf.registrationPath).done(function(e,t,r){s.createAuth0Identity({username:"master:"+i.emailAddress,password:i.password}).done(function(e,t,r){s.postToAuthEndpointWithState("master:"+i.emailAddress,o,n),s.toggleLoadingStatus(!1)})}).fail(function(e,o,t){var i=JSON.parse(e.responseText);i&&i.errorReasonCodes&&s.onLoginError(i),s.toggleLoadingStatus(!1)})},postToCaps:function(e,o){var t={method:"POST",url:o,contentType:"application/json",data:JSON.stringify(e),headers:{"X-HTTP-Method-Override":"POST","X-REQUEST-SCHEME":"HTTPS"}};return $.ajax(t)},deleteCookie:function(e){document.cookie=e+"=; Path=/; max-age=Thu, 01 Jan 1970 00:00:01 GMT; Domain=.dowjones.com;"},goToSubscribe:function(e){if(e.preventDefault(),this.$registrationPopupEnabled&&this.brand.newSubscriberLink){var o=screen.width/2-250,t=screen.height/2-300;window.open(this.brand.newSubscriberLink,"_blank","toolbar=yes,scrollbars=yes,resizable=yes,width=500, height=600, top="+t+", left="+o)}else window.location.href=this.brand.newSubscriberLink},goToActivateSubscription:function(e){e.preventDefault(),window.location.href=this.brand.activateSubscriptionLink},applyBrandToSubscribeCard:function(){var e;e=this.brand?this.brand.displayName?this.brand.displayName:this.brand.fullName:"WSJ",this.$subscriberBrandLabel.text(" "+e)},getLanguageForRecaptcha:function(){var e=DowJones.OneIdentity.uiLocales.language;return"zhtw"===e?"zh-TW":"zhcn"===e?"zh-CN":e},invokeRecaptcha:function(e,o,t){var i=this;window.onloadCallback=function(){grecaptcha.render("recaptcha-container",{sitekey:DowJones.Config.grecaptchaSitekey,hl:i.getLanguageForRecaptcha(),callback:function(){i.enableSubmitButton()}})}},disableSubmitButton:function(){this.$submitButton.attr("disabled","disabled")},enableSubmitButton:function(){this.$submitButton.removeAttr("disabled")},getCookieByName:function(e){var o=document.cookie.match(new RegExp(e+"=([^;]+)"));return o?o[1]:null},showRecaptchaIfNeeded:function(){var e=parseInt(this.getCookieByName("LF"));e>=5&&(this.$recaptchaError.show(),this.$recaptchaContainer.is(":visible")?(this.disableSubmitButton(),grecaptcha.reset()):(this.$recaptchaContainer.show(),this.disableSubmitButton(),this.invokeRecaptcha(DowJones.Config.recaptchaUrl,DowJones.Config.recaptchaSitekey)))},isUserProPEVC:function(e){var o=(DowJones.Config&&DowJones.Config.resource_owner_client_id?DowJones.Config.resource_owner_client_id:DowJones.OneIdentity.getQueryVariable("client"),{username:e}),t=this;this.postToCaps(o,this.conf.checkProUserPath).done(function(e,o,i){e.status?(t.$nextButton.hide(),t.$submitButton.show(),t.$passwordContainer.show(),t.$rememberMeContainer.show(),t.$loginOptionsContainer.show(),t.$password.focus()):t.redirectToWsjProListing()}).fail(function(e,o){t.redirectToWsjProListing()})},redirectToWsjProListing:function(){var e=this.getCookieByName("djcs_target");this.deleteCookie("djcs_target"),window.location.href=DowJones.OneIdentity.getBrand().noProUserRedirect+"?target_uri="+e},validateOnlyEmail:function(){return 0!==this.$email.val().length||(this.$emailError.show(),this.$email.addClass("error"),!1)},managePasswordFieldBehavior:function(e){if(this.hidePasswordField&&"wsjpro"==e){var o=this;o.$passwordContainer.hide(),o.$rememberMeContainer.hide(),o.$loginOptionsContainer.hide(),o.$submitButton.hide(),o.$nextButton.show(),o.$nextButton.on("click",o.nextButtonClick.bind(this))}},nextButtonClick:function(e){if(e.preventDefault(),this.validateOnlyEmail()){var o=this.$email.val();this.isUserProPEVC(o)}},destroy:function(){this.authZeroClient=null,this.createConnectAccount=null,this.autoPopulateUsername=null,this.$container=null,this.$oneTimeLinkLabel=null,this.$email=null,this.$emailError=null,this.$password=null,this.$passwordContainer=null,this.$passwordError=null,this.$errorContainer=null,this.$submitButton=null,this.$nextButton=null,this.$errors=null,this.$loginForm.off("submit"),this.$loginForm=null,this.$forgotLink.off("click"),this.$forgotLink=null,this.$smsLogin.off("click"),this.$smsLogin=null,this.$emailLink.off("click"),this.$emailLink=null,this.$createConnectButton.off("click"),this.$createConnectButton=null,this.$connectButton.off("click"),this.$connectButton=null,this.$oneTimeLinkButtons=null,this.socialComponent.destroy(),this.socialComponent=null,this.$newMemberLink.off("click"),this.$newMemberLink=null,this.$registrationPopupEnabled=null,this.$rememberMe.off("click"),this.$rememberMe=null,this.$rememberMeCheckBox=null,this.$rememberMeLabel.off("click"),this.$rememberMeLabel=null,this.$rememberMeContainer=null,this.$loginOptionsContainer=null,this.$passWordToggle.off("click"),this.$passWordToggle=null,this.auth0config=null,this.$activatePrintSubscription=null,this.$subscribeCard=null,this.$subscribeButton.off("click"),this.$subscribeButton=null,this.$activateSubscriptionLink.off("click"),this.$activateSubscriptionLink=null,this.$subscriberBrandLabel=null,this.$recaptchaError=null,this.$recaptchaContainer=null,this.hidePasswordField=null,this.conf=null,this.lang=null,this.brand=null}}}(),function(){window.DowJones=window.DowJones||{},DowJones.PasswordResetForm=function(){this.resetToken=DowJones.OneIdentity.getQueryVariable("requestId"),this.conf={userInfoPath:"/consumeraccess/svc/forgotcredential/token/"+this.resetToken+"/users.json",passwordResetPath:"/consumeraccess/svc/forgotcredential/token/"+this.resetToken+"/password.json"},this.$container=$("#reset-password"),this.$password=this.$container.find("#new-password"),this.$confirmPassword=this.$container.find("#confirm-new-password"),this.$passwordResetForm=this.$container.find("form"),this.$passwordResetForm.on("submit",this.resetPassword.bind(this)),this.$resetButton=this.$container.find("button"),this.$errors=this.$container.find(".errors"),this.lang=DowJones.OneIdentity&&DowJones.OneIdentity.uiLocales?DowJones.OneIdentity.uiLocales.language:"en"},DowJones.PasswordResetForm.prototype={run:function(){setTimeout(function(){this.$password.focus()}.bind(this),100),this.getUserInfoFromToken()},postToCaps:function(e,o,t,i){e=e?e.toUpperCase():"GET";var n={"X-HTTP-Method-Override":e,"X-REQUEST-SCHEME":"HTTPS"},s={};s=i?Object.assign(n,i):n;var r={method:e,url:t,contentType:"application/json",data:JSON.stringify(o),headers:s};return $.ajax(r)},getUserInfoFromToken:function(){var e=this;this.toggleLoadingStatus(!0),this.postToCaps("get",void 0,this.conf.userInfoPath).done(function(o){e.userData=o.users[0],e.toggleLoadingStatus(!1)}).fail(function(o,t){e.onApiError(o),e.$resetButton.prop("disabled",!0)})},resetPassword:function(e){if(e.preventDefault(),this.clearErrors(),this.validateForm()){var o=this;this.toggleLoadingStatus(!0);var t={userName:this.userData.username,password:this.$password.val(),confirmPassword:this.$confirmPassword.val()};this.postToCaps("post",t,this.conf.passwordResetPath).done(function(){page.show("/password-reset-confirmation"),o.toggleLoadingStatus(!1)}).fail(function(e,t){o.onApiError(e),o.toggleLoadingStatus(!1)})}},toggleLoadingStatus:function(e){e?(this.$password.prop("disabled",!0),this.$confirmPassword.prop("disabled",!0),this.$resetButton.prop("disabled",!0),this.$passwordResetForm.addClass("loading")):(this.$password.prop("disabled",!1),this.$confirmPassword.prop("disabled",!1),this.$resetButton.prop("disabled",!1),this.$passwordResetForm.removeClass("loading"))},onApiError:function(e){this.handleCapsError(e.responseJSON);this.toggleLoadingStatus(!1)},getLangTokens:function(e,o){switch(e){case"token-invalid":case"token-expired":case"token-missing":return"invalidToken";case"password-minlength":return"passwordMinLength";case"password-maxlength":return"passwordMaxLength";case"password-invalid":return"invalidPassword";default:return null}},getMessageFromToken:function(e,o){return o=o?o:this.lang,window.DowJones.languages?window.DowJones.languages[o][e]:""},handleCapsError:function(e){if(!e)return"";var o=this,t=e.errorReasonCodes.map(this.getLangTokens),i=t.map(function(e){return e?o.getMessageFromToken(e,o.lang):null});this.showErrors(i.join("<br>"))},validateForm:function(){var e=!0,o=[];return this.$password.val()||(this.$password.addClass("error"),o.push(this.getMessageFromToken("regPasswordError")),e=!1),this.$password.val()&&!this.$confirmPassword.val()?(this.$confirmPassword.addClass("error"),o.push(this.getMessageFromToken("regConfirmPwdError")),e=!1):this.$password.val()&&this.$password.val()!==this.$confirmPassword.val()&&(this.$confirmPassword.addClass("error"),o.push(this.getMessageFromToken("regConfirmPwdError")),e=!1),this.showErrors(o.join("<br>")),e},showErrors:function(e){this.$errors.html(e),this.$errors.show()},clearErrors:function(){this.$container.find(".error").removeClass("error"),this.$container.find(".input-error").hide(),this.$errors.html(""),this.$errors.hide()},destroy:function(){this.clearErrors(),this.resetToken=null,this.conf=null,this.$password=null,this.$confirmPassword=null,this.$passwordResetForm.off("submit"),this.$passwordResetForm=null,this.$resetButton=null,this.$errors=null,this.lang=null,this.$container=null}}}(),function(){window.DowJones=window.DowJones||{},DowJones.PasswordResetConfirm=function(){this.$container=$("#password-reset-confirm"),this.$signInButton=this.$container.find(".prc-signin-button"),this.$signInButton.on("click",this.goToSignIn)},DowJones.PasswordResetConfirm.prototype={goToSignIn:function(){window.location.href=DowJones.OneIdentity.getBrand().loginRedirect},destroy:function(){this.$signInButton.off("click"),this.$signInButton=null,this.$container=null}}}(),function(){window.DowJones=window.DowJones||{},DowJones.UserRegistrationConfirmation=function(){this.$container=$("#registration-confirm")},DowJones.UserRegistrationConfirmation.prototype={run:function(){},destroy:function(){this.$container=null}}}(),function(){window.DowJones=window.DowJones||{},DowJones.SMSCodeForm=function(){this.authZeroClient=DowJones.OneIdentity.initializeAuthZero(),this.$container=$("#sms-login-code"),this.$smsCodeForm=this.$container.find("form"),this.$code=this.$container.find("#smscode"),this.$codeError=this.$container.find(".smscode-error"),this.$codeSubmit=this.$container.find(".sms-code-submit"),this.$codeSubmit.on("click",this.onCodeSubmit.bind(this))},DowJones.SMSCodeForm.prototype={run:function(e){this.phoneNumber=e,setTimeout(function(){this.$code.focus()}.bind(this),100)},onCodeSubmit:function(e){if(e.preventDefault(),this.clearErrors(),this.validateCode()){var o=this.$code.val(),t=this;this.toggleLoadingStatus(!0),this.authZeroClient.verifySMSCode({phoneNumber:this.phoneNumber,code:o,state:DowJones.OneIdentity.authZeroState},function(e){t.$code.addClass("error"),t.$codeError.html(e.error),t.$codeError.show(),t.toggleLoadingStatus(!1)})}},validateCode:function(){return 0!==this.$code.val().length||(this.$code.addClass("error"),this.$codeError.show(),!1)},toggleLoadingStatus:function(e){e?(this.$code.prop("disabled",!0),this.$codeSubmit.prop("disabled",!0),this.$smsCodeForm.addClass("loading")):(this.$code.prop("disabled",!1),this.$codeSubmit.prop("disabled",!1),this.$smsCodeForm.removeClass("loading"))},clearErrors:function(){this.$container.find(".error").removeClass("error"),this.$codeError.hide()},destroy:function(){this.authZeroClient=null,this.$container=null,this.$smsCodeForm=null,this.$code=null,this.$codeError=null,this.$codeSubmit.off("click"),this.$codeSubmit=null}}}(),function(){window.DowJones=window.DowJones||{},DowJones.SMSPhoneForm=function(){this.authZeroClient=DowJones.OneIdentity.initializeAuthZero(),this.$container=$("#sms-login-phone"),this.$smsPhoneForm=this.$container.find("form"),this.$countryCode=this.$container.find("#smscountry"),this.$phone=this.$container.find("#smsphone"),this.$phoneError=this.$container.find(".smsphone-error"),this.$phoneSubmit=this.$container.find(".sms-phone-submit"),this.$phoneSubmit.on("click",this.onPhoneSubmit.bind(this))},DowJones.SMSPhoneForm.prototype={run:function(){setTimeout(function(){this.$phone.focus()}.bind(this),100)},onPhoneSubmit:function(e){if(e.preventDefault(),this.clearErrors(),this.validatePhone()){var o=this.$countryCode.value()+this.$phone.val(),t=this;this.toggleLoadingStatus(!0),this.authZeroClient.requestSMSCode({phoneNumber:o,state:DowJones.OneIdentity.authZeroState},function(e){e?(t.$phone.addClass("error"),t.$phoneError.html(e.error_description),t.$phoneError.show()):page.show("/sms-code/"+o),t.toggleLoadingStatus(!1)})}},validatePhone:function(){return 0!==this.$phone.val().length||(this.$phone.addClass("error"),this.$phoneError.show(),!1)},toggleLoadingStatus:function(e){e?(this.$phone.prop("disabled",!0),this.$phoneSubmit.prop("disabled",!0),this.$smsPhoneForm.addClass("loading")):(this.$phone.prop("disabled",!1),this.$phoneSubmit.prop("disabled",!1),this.$smsPhoneForm.removeClass("loading"))},clearErrors:function(){this.$container.find(".error").removeClass("error"),this.$phoneError.hide()},destroy:function(){this.authZeroClient=null,this.$container=null,this.$smsPhoneForm=null,this.$countryCode=null,this.$phone=null,this.$phoneError=null,this.$phoneSubmit.off("click"),this.$phoneSubmit=null}}}(),function(){window.DowJones=window.DowJones||{},DowJones.SocialLogins=function(){var e=DowJones.OneIdentity.getLoginOptions(window),o=e.google,t=e.facebook;this.authZeroClient=DowJones.OneIdentity.initializeAuthZero(),this.$container=$("#social-card"),this.$googleLogin=this.$container.find(".socialbtn-google"),this.$googleLogin.toggle(o),this.$googleLogin.on("click",this.onGoogleLogin.bind(this)),this.$facebookLogin=this.$container.find(".socialbtn-facebook"),this.$facebookLogin.toggle(t),this.$facebookLogin.on("click",this.onFacebookLogin.bind(this))},DowJones.SocialLogins.prototype={onGoogleLogin:function(){console.log("\ngoogle prot\n"),window.DowJones.OneIdentity.trackEvent({module:"google"}),this.authZeroClient.login({connection:"google-oauth2",state:DowJones.OneIdentity.authZeroState,scope:DowJones.OneIdentity.getQueryVariable("scope")||"openid",device:DowJones.OneIdentity.getQueryVariable("device")||"heimdall-rp-login",ui_locales:DowJones.OneIdentity.getQueryVariable("ui_locales")||""})},onFacebookLogin:function(){window.DowJones.OneIdentity.trackEvent({module:"facebook"}),this.authZeroClient.login({connection:"facebook",state:DowJones.OneIdentity.authZeroState,scope:DowJones.OneIdentity.getQueryVariable("scope")||"openid",device:DowJones.OneIdentity.getQueryVariable("device")||"heimdall-rp-login",ui_locales:DowJones.OneIdentity.getQueryVariable("ui_locales")||""})},toggleSocialLogins:function(){this.$container.toggleClass("show")},removeSocialCard:function(){this.$container.remove()},destroy:function(){this.authZeroClient=null,this.$container=null,this.$googleLogin.off("click"),this.$googleLogin=null,this.$facebookLogin.off("click"),this.$facebookLogin=null}}}(),function(){window.DowJones=window.DowJones||{},DowJones.TempPasswordUpdate=function(){this.$container=$("#temp-password-update"),this.$updatePasswordBtn=this.$container.find(".temp-pw-update"),this.$updatePasswordBtn.on("click",this.onUpdatePasswordClick.bind(this)),this.$signInBtn=this.$container.find(".temp-pw-signin"),this.$signInBtn.on("click",this.onSignInClick.bind(this))},DowJones.TempPasswordUpdate.prototype={run:function(){},onSignInClick:function(e){e.preventDefault(),window.location.href=DowJones.OneIdentity.getBrand().loginRedirect},onUpdatePasswordClick:function(){var e=DowJones.OneIdentity.getQueryVariable("state");window.location.href="/continue?state="+e},destroy:function(){this.$updatePasswordBtn.off("click"),this.$updatePasswordBtn=null,this.$signInBtn.off("click"),this.$signInBtn=null,this.$container=null}}}(),function(){window.DowJones=window.DowJones||{},DowJones.UserRegistrationForm=function(){this.conf={userRegistration:"/consumeraccess/svc/registration/user.json?mode=create"},this.$container=$("#user-registration"),this.$regForm=this.$container.find("form"),this.$firstName=this.$container.find("#first-name-for-reg"),this.$lastName=this.$container.find("#last-name-for-reg"),this.$email=this.$container.find("#email-for-reg"),this.$password=this.$container.find("#password-for-reg"),this.$confPassword=this.$container.find("#confirm-password-for-reg"),this.$demographicJobTitle=this.$container.find("#dt-job-title-for-reg"),this.$agreementCheckbox=this.$container.find("#policies-checkbox"),this.$regError=this.$container.find(".errors"),this.$firstNameError=this.$container.find(".first-name-for-reg-error"),this.$lastNameError=this.$container.find(".last-name-for-reg-error"),this.$emailError=this.$container.find(".email-for-reg-error"),this.$passwordError=this.$container.find(".password-for-reg-error"),this.$confPasswordError=this.$container.find(".confirm-password-for-reg-error"),this.$agreementError=this.$container.find(".agreement-error"),this.$agreementCheckbox.on("change",this.onAgreementCheckboxChange.bind(this)),this.$ruSubmit=this.$container.find(".reg-submit-btn"),this.$ruSubmit.on("click",this.onRegSubmitClick.bind(this))},DowJones.UserRegistrationForm.prototype={run:function(){setTimeout(function(){this.$firstName.focus(),this.onAgreementCheckboxChange()}.bind(this),100)},onRegSubmitClick:function(e){if(e.preventDefault(),this.clearErrors(),this.validateForm()){var o=this;this.toggleLoadingStatus(!0),this.postToCaps(this.createUserObj(),this.conf.userRegistration).done(function(e,t,i){page.show("/registration-confirm"),o.toggleLoadingStatus(!1)}).fail(function(e,t,i){var n=JSON.parse(e.responseText);n&&n.errorReasonCodes&&o.handleCapsError(n.errorReasonCodes),o.toggleLoadingStatus(!1)})}},onAgreementCheckboxChange:function(e){this.$agreementCheckbox.is(":checked")?this.$ruSubmit.removeAttr("disabled"):this.$ruSubmit.prop("disabled",!0)},createUserObj:function(){return obj={firstName:this.$firstName.val(),lastName:this.$lastName.val(),emailAddress:this.$email.val(),password:this.$password.val(),confirmPassword:this.$confPassword.val(),editionId:DowJones.OneIdentity.getEdition(),displayContextId:"REGISTRATION",returnLink:DowJones.OneIdentity.getBrand().homePage,privacyPolicyAcceptedVersion:"1.0"},$("dt-job-title-for-reg").is(":visible")&&(obj.demographicsQuestionAnswers=[{questionId:"dt_job_title",answerId:this.$demographicJobTitle.find(":selected").val()}]),obj},postToCaps:function(e,o){var t={method:"POST",url:o,contentType:"application/json",data:JSON.stringify(e),headers:{"X-HTTP-Method-Override":"POST","X-REQUEST-SCHEME":"HTTPS"}};return $.ajax(t)},validateForm:function(){var e=!0,o=[];return 0===this.$email.val().length&&(this.$email.addClass("error"),this.$emailError.show(),e=!1),0===this.$firstName.val().length&&(this.$firstName.addClass("error"),this.$firstNameError.show(),e=!1),0===this.$lastName.val().length&&(this.$lastName.addClass("error"),this.$lastNameError.show(),e=!1),(this.$password.val().length<5||this.$password.val().length>15)&&(this.$password.addClass("error"),this.$passwordError.show(),o.push("Password must have between 5 and 15 characters."),e=!1),0===this.$confPassword.val().length&&(this.$confPassword.addClass("error"),this.$confPasswordError.show(),o.push("Please confirm password."),e=!1),this.$confPassword.val().length>0&&this.$confPassword.val()!==this.$password.val()&&(this.$confPassword.addClass("error"),this.$confPasswordError.show(),o.push("Passwords do not match."),window.DowJones.OneIdentity.trackEvent({module:"regerror-pwd-mismatch"},"view"),e=!1),e||(this.showErrors(o.join("\n")),window.DowJones.OneIdentity.trackEvent({module:"regerror-incomplete-form"},"view")),e},toggleLoadingStatus:function(e){e?(this.$email.prop("disabled",!0),this.$firstName.prop("disabled",!0),this.$lastName.prop("disabled",!0),this.$password.prop("disabled",!0),this.$confPassword.prop("disabled",!0),this.$ruSubmit.prop("disabled",!0),this.$regForm.addClass("loading")):(this.$email.prop("disabled",!1),this.$firstName.prop("disabled",!1),this.$lastName.prop("disabled",!1),this.$password.prop("disabled",!1),this.$confPassword.prop("disabled",!1),this.$ruSubmit.prop("disabled",!1),this.$regForm.removeClass("loading"))},handleCapsError:function(e){var o=[];for(var t in e)switch(e[t]){case"firstName-minlength":case"firstName-maxlength":this.$firstName.addClass("error"),o.push("Please check the length of your first name.");break;case"lastName-minlength":case"lastName-maxlength":this.$lastName.addClass("error"),o.push("Please check the length of your last name.");break;case"password-minlength":this.$password.addClass("error"),o.push("Please enter a password with at least 5 characters");break;case"password-maxlength":this.$password.addClass("error"),o.push("Password must be less then 15 characters");break;case"password-invalid":this.$password.addClass("error"),o.push("Please try again. You've entered a password that contains invalid characters.");break;case"confirmPassword-not-matching-password":this.$confPassword.addClass("error"),o.push("Your passwords do not match.");break;case"confirmPassword-required":this.$confPassword.addClass("error"),o.push("Please confirm your password.");break;case"emailAddress-format":this.$email.addClass("error"),o.push("Please check the format of your email address.");break;case"emailAddress-minlength":this.$email.addClass("error"),o.push("Email address must be at least 5 characters.");break;case"emailAddress-maxlength":this.$email.addClass("error"),o.push("Email address must be under 100 characters.");break;case"emailAddress-notAvailable":this.$email.addClass("error"),o.push("Email address is already in use."),window.DowJones.OneIdentity.trackEvent({module:"regerror-email-exists"},"view");break;default:o.push("Error code - "+t)}this.showErrors(o.join("\n"))},showErrors:function(e){this.toggleLoadingStatus(!1),this.$regError.addClass("error"),this.$regError.text(e),this.$regError.show()},clearErrors:function(){this.$container.find(".error").removeClass("error"),this.$container.find(".input-error").hide(),this.$regError.text(""),this.$regError.hide()},destroy:function(){this.clearErrors(),this.conf=null,this.$container=null,this.$regForm=null,this.$firstName=null,this.$firstNameError=null,this.$lastName=null,this.$lastNameError=null,this.$email=null,this.$emailError=null,this.$password=null,this.$passwordError=null,this.$confPassword=null,this.$confPasswordError=null,this.$demographicJobTitle=null,this.$regError=null,this.$agreementCheckbox.off("change"),this.$agreementCheckbox=null,this.$agreementError=null,this.$ruSubmit.off("click"),this.$ruSubmit=null}}}(),function(){window.DowJones=window.DowJones||{},DowJones.VerifyRegistration=function(){this.conf={verifyRegistration:"/consumeraccess/svc/registration/emailVerification.json"},this.$container=$("#verify-registration"),this.$regError=this.$container.find(".errors"),this.$cardTitle=this.$container.find(".card-title"),this.$rtlSubmit=this.$container.find(".ver-reg-rtl-btn"),this.$rtlSubmit.on("click",this.onRTLSubmitClick.bind(this))},DowJones.VerifyRegistration.prototype={run:function(){var e=DowJones.OneIdentity.getQueryVariable("requestId");e&&""!=e.trim()?(this.toggleLoadingStatus(!0),this.postToCaps(this.createVerificationObj(e),this.conf.verifyRegistration).done(function(e,o,t){this.toggleLoadingStatus(!1)}.bind(this)).fail(function(e,o,t){var i=e.responseJSON;i&&i.errorReasonCodes&&this.handleCapsError(i.errorReasonCodes),this.toggleLoadingStatus(!1)}.bind(this)),setTimeout(function(){this.$rtlSubmit.focus()}.bind(this),100)):this.showErrors("Sorry, the token has expired or is invalid. The tokens in the email are one-time use and expire in 7 days. Please register again or use Forgot password to retrieve your information.")},onRTLSubmitClick:function(e){e.preventDefault(),this.clearErrors(),window.location.href=DowJones.OneIdentity.getBrand().registrationRedirect},createVerificationObj:function(e){return obj={token:e},obj},postToCaps:function(e,o){var t={method:"POST",url:o,contentType:"application/json",data:JSON.stringify(e),headers:{"X-HTTP-Method-Override":"POST","X-REQUEST-SCHEME":"HTTPS"}};return $.ajax(t)},toggleLoadingStatus:function(e){e?(this.$rtlSubmit.prop("disabled",!0),this.$container.addClass("loading")):(this.$rtlSubmit.prop("disabled",!1),this.$container.removeClass("loading"))},handleCapsError:function(e){var o,t=[];if(Array.isArray(e)){for(;o=e.shift();)switch(o){case"token-invalid":case"token-expired":t.push("Sorry, your token has expired or is invalid. The tokens in the email are one-time use and expire in 7 days. Please register");break;case"token-minlength":t.push("The submitted token appears to be truncated. Please copy and paste the entire URL into your browser/s URL bar.");break;case"password-required":t.push("Your account does not appear to have a password. Please contact customer service to correct your account.");break;default:t.push("Error code - "+o)}this.showErrors(t)}},showErrors:function(e){var o;this.toggleLoadingStatus(!1),this.$rtlSubmit.hide(),this.$cardTitle.hide(),this.$regError.addClass("error");var t=Object.prototype.toString.call(e);o="[object String]"===t?"<ul><li>"+e+"</li></ul>":"[object Array]"===t?"<ul><li>"+e.join("</li><li>")+"</li></ul>":e,this.$regError.html(o),this.$regError.show(),this.$container.find("div.call-to-action a").show()},clearErrors:function(){this.$container.find(".error").removeClass("error"),this.$container.find(".input-error").hide(),this.$regError.text(""),this.$regError.hide(),this.$cardTitle.show()},destroy:function(){this.clearErrors(),this.conf=null,this.$container=null,this.$regError=null,this.$rtlSubmit.off("click"),this.$rtlSubmit=null,this.$cardTitle=null}}}();